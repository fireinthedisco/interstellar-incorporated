namespace = iicso

event = {
    id = iicso.1000
    is_triggered_only = yes
    hide_window = yes

    immediate = {
        every_country = {
            limit = {
                OR = {
                    is_country_type = default
                    is_country_type = fallen_empire
                    is_country_type = awakened_fallen_empire
                }
            }
            every_owned_planet = {
                set_variable = { which = planet_minerals_output value = 0 }
                set_variable = { which = planet_alloys_output value = 0 }
                set_variable = { which = planet_exotic_gases_output value = 0 }
                set_variable = { which = planet_rare_crystals_output value = 0 }
                set_variable = { which = planet_volatile_motes_output value = 0 }
                set_variable = { which = planet_zro_output value = 0 }
                set_variable = { which = planet_dark_matter_output value = 0 }
                set_variable = { which = planet_living_metal_output value = 0 }
                set_variable = { which = planet_food_output value = 0 }
                set_variable = { which = planet_consumer_goods_output value = 0 }
                set_variable = { which = planet_energy_output value = 0 }

                
                set_variable = { which = planet_minerals_upkeep value = 0 }
                set_variable = { which = planet_alloys_upkeep value = 0 }
                set_variable = { which = planet_exotic_gases_upkeep value = 0 }
                set_variable = { which = planet_rare_crystals_upkeep value = 0 }
                set_variable = { which = planet_volatile_motes_upkeep value = 0 }
                set_variable = { which = planet_zro_upkeep value = 0 }
                set_variable = { which = planet_dark_matter_upkeep value = 0 }
                set_variable = { which = planet_living_metal_upkeep value = 0 }
                set_variable = { which = planet_food_upkeep value = 0 }
                set_variable = { which = planet_consumer_goods_upkeep value = 0 }
                set_variable = { which = planet_energy_upkeep value = 0 }

                set_variable = { which = job_production_modifier value = 0 }


                #governor
                if = {
                    limit = { exists = sector.leader }
                    sector = {
                        leader = {
                            if = {
                                limit = { has_skill >= 10 }
                                PREVPREV = { set_variable = { which = governor_production_modifier value = 0.20 }}
                            } else_if = {
                                limit = { has_skill >= 9 }
                                PREVPREV = { set_variable = { which = governor_production_modifier value = 0.18 }}
                            } else_if = {
                                limit = { has_skill >= 8 }
                                PREVPREV = { set_variable = { which = governor_production_modifier value = 0.16 }}
                            } else_if = {
                                limit = { has_skill >= 7 }
                                PREVPREV = { set_variable = { which = governor_production_modifier value = 0.14 }}
                            } else_if = {
                                limit = { has_skill >= 6 }
                                PREVPREV = { set_variable = { which = governor_production_modifier value = 0.12 }}
                            } else_if = {
                                limit = { has_skill >= 5 }
                                PREVPREV = { set_variable = { which = governor_production_modifier value = 0.10 }}
                            } else_if = {
                                limit = { has_skill >= 4 }
                                PREVPREV = { set_variable = { which = governor_production_modifier value = 0.08 }}
                            } else_if = {
                                limit = { has_skill >= 3 }
                                PREVPREV = { set_variable = { which = governor_production_modifier value = 0.06 }}
                            } else_if = {
                                limit = { has_skill >= 2 }
                                PREVPREV = { set_variable = { which = governor_production_modifier value = 0.04 }}
                            } else_if = {
                                limit = { has_skill >= 1 }
                                PREVPREV = { set_variable = { which = governor_production_modifier value = 0.02 }}
                            }
                        }
                    }
                    change_variable = { which = job_production_modifier value = governor_production_modifier }
                    set_variable = { which = governor_production_modifier value = 0 }
                }

                
                #Stability production modifier
                if = { limit = { planet_stability >= 100 }
                    set_variable = { which = stability_production_modifier value = 1 }
                } else_if = { limit = { planet_stability >= 99 }
                    set_variable = { which = stability_production_modifier value = 0.99 }
                } else_if = { limit = { planet_stability >= 98 }
                    set_variable = { which = stability_production_modifier value = 0.98 }
                } else_if = { limit = { planet_stability >= 97 }
                    set_variable = { which = stability_production_modifier value = 0.97 }
                } else_if = { limit = { planet_stability >= 96 }
                    set_variable = { which = stability_production_modifier value = 0.96 }
                } else_if = { limit = { planet_stability >= 95 }
                    set_variable = { which = stability_production_modifier value = 0.95 }
                } else_if = { limit = { planet_stability >= 94 }
                    set_variable = { which = stability_production_modifier value = 0.94 }
                } else_if = { limit = { planet_stability >= 93 }
                    set_variable = { which = stability_production_modifier value = 0.93 }
                } else_if = { limit = { planet_stability >= 92 }
                    set_variable = { which = stability_production_modifier value = 0.92 }
                } else_if = { limit = { planet_stability >= 91 }
                    set_variable = { which = stability_production_modifier value = 0.91 }
                } else_if = { limit = { planet_stability >= 90 }
                    set_variable = { which = stability_production_modifier value = 0.90 }
                } else_if = { limit = { planet_stability >= 89 }
                    set_variable = { which = stability_production_modifier value = 0.89 }
                } else_if = { limit = { planet_stability >= 88 }
                    set_variable = { which = stability_production_modifier value = 0.88 }
                } else_if = { limit = { planet_stability >= 87 }
                    set_variable = { which = stability_production_modifier value = 0.87 }
                } else_if = { limit = { planet_stability >= 86 }
                    set_variable = { which = stability_production_modifier value = 0.86 }
                } else_if = { limit = { planet_stability >= 85 }
                    set_variable = { which = stability_production_modifier value = 0.85 }
                } else_if = { limit = { planet_stability >= 84 }
                    set_variable = { which = stability_production_modifier value = 0.84 }
                } else_if = { limit = { planet_stability >= 83 }
                    set_variable = { which = stability_production_modifier value = 0.83 }
                } else_if = { limit = { planet_stability >= 82 }
                    set_variable = { which = stability_production_modifier value = 0.82 }
                } else_if = { limit = { planet_stability >= 81 }
                    set_variable = { which = stability_production_modifier value = 0.81 }
                } else_if = { limit = { planet_stability >= 80 }
                    set_variable = { which = stability_production_modifier value = 0.80 }
                } else_if = { limit = { planet_stability >= 79 }
                    set_variable = { which = stability_production_modifier value = 0.79 }
                } else_if = { limit = { planet_stability >= 78 }
                    set_variable = { which = stability_production_modifier value = 0.78 }
                } else_if = { limit = { planet_stability >= 77 }
                    set_variable = { which = stability_production_modifier value = 0.77 }
                } else_if = { limit = { planet_stability >= 76 }
                    set_variable = { which = stability_production_modifier value = 0.76 }
                } else_if = { limit = { planet_stability >= 75 }
                    set_variable = { which = stability_production_modifier value = 0.75 }
                } else_if = { limit = { planet_stability >= 74 }
                    set_variable = { which = stability_production_modifier value = 0.74 }
                } else_if = { limit = { planet_stability >= 73 }
                    set_variable = { which = stability_production_modifier value = 0.73 }
                } else_if = { limit = { planet_stability >= 72 }
                    set_variable = { which = stability_production_modifier value = 0.72 }
                } else_if = { limit = { planet_stability >= 71 }
                    set_variable = { which = stability_production_modifier value = 0.71 }
                } else_if = { limit = { planet_stability >= 70 }
                    set_variable = { which = stability_production_modifier value = 0.70 }
                } else_if = { limit = { planet_stability >= 69 }
                    set_variable = { which = stability_production_modifier value = 0.69 }
                } else_if = { limit = { planet_stability >= 68 }
                    set_variable = { which = stability_production_modifier value = 0.68 }
                } else_if = { limit = { planet_stability >= 67 }
                    set_variable = { which = stability_production_modifier value = 0.67 }
                } else_if = { limit = { planet_stability >= 66 }
                    set_variable = { which = stability_production_modifier value = 0.66 }
                } else_if = { limit = { planet_stability >= 65 }
                    set_variable = { which = stability_production_modifier value = 0.65 }
                } else_if = { limit = { planet_stability >= 64 }
                    set_variable = { which = stability_production_modifier value = 0.64 }
                } else_if = { limit = { planet_stability >= 63 }
                    set_variable = { which = stability_production_modifier value = 0.63 }
                } else_if = { limit = { planet_stability >= 62 }
                    set_variable = { which = stability_production_modifier value = 0.62 }
                } else_if = { limit = { planet_stability >= 61 }
                    set_variable = { which = stability_production_modifier value = 0.61 }
                } else_if = { limit = { planet_stability >= 60 }
                    set_variable = { which = stability_production_modifier value = 0.60 }
                } else_if = { limit = { planet_stability >= 59 }
                    set_variable = { which = stability_production_modifier value = 0.59 }
                } else_if = { limit = { planet_stability >= 58 }
                    set_variable = { which = stability_production_modifier value = 0.58 }
                } else_if = { limit = { planet_stability >= 57 }
                    set_variable = { which = stability_production_modifier value = 0.57 }
                } else_if = { limit = { planet_stability >= 56 }
                    set_variable = { which = stability_production_modifier value = 0.56 }
                } else_if = { limit = { planet_stability >= 55 }
                    set_variable = { which = stability_production_modifier value = 0.55 }
                } else_if = { limit = { planet_stability >= 54 }
                    set_variable = { which = stability_production_modifier value = 0.54 }
                } else_if = { limit = { planet_stability >= 53 }
                    set_variable = { which = stability_production_modifier value = 0.53 }
                } else_if = { limit = { planet_stability >= 52 }
                    set_variable = { which = stability_production_modifier value = 0.52 }
                } else_if = { limit = { planet_stability >= 51 }
                    set_variable = { which = stability_production_modifier value = 0.51 }
                } else_if = { limit = { planet_stability >= 50 }
                    set_variable = { which = stability_production_modifier value = 0.50 }
                } else_if = { limit = { planet_stability >= 49 }
                    set_variable = { which = stability_production_modifier value = 0.49 }
                } else_if = { limit = { planet_stability >= 48 }
                    set_variable = { which = stability_production_modifier value = 0.48 }
                } else_if = { limit = { planet_stability >= 47 }
                    set_variable = { which = stability_production_modifier value = 0.47 }
                } else_if = { limit = { planet_stability >= 46 }
                    set_variable = { which = stability_production_modifier value = 0.46 }
                } else_if = { limit = { planet_stability >= 45 }
                    set_variable = { which = stability_production_modifier value = 0.45 }
                } else_if = { limit = { planet_stability >= 44 }
                    set_variable = { which = stability_production_modifier value = 0.44 }
                } else_if = { limit = { planet_stability >= 43 }
                    set_variable = { which = stability_production_modifier value = 0.43 }
                } else_if = { limit = { planet_stability >= 42 }
                    set_variable = { which = stability_production_modifier value = 0.42 }
                } else_if = { limit = { planet_stability >= 41 }
                    set_variable = { which = stability_production_modifier value = 0.41 }
                } else_if = { limit = { planet_stability >= 40 }
                    set_variable = { which = stability_production_modifier value = 0.40 }
                } else_if = { limit = { planet_stability >= 39 }
                    set_variable = { which = stability_production_modifier value = 0.39 }
                } else_if = { limit = { planet_stability >= 38 }
                    set_variable = { which = stability_production_modifier value = 0.38 }
                } else_if = { limit = { planet_stability >= 37 }
                    set_variable = { which = stability_production_modifier value = 0.37 }
                } else_if = { limit = { planet_stability >= 36 }
                    set_variable = { which = stability_production_modifier value = 0.36 }
                } else_if = { limit = { planet_stability >= 35 }
                    set_variable = { which = stability_production_modifier value = 0.35 }
                } else_if = { limit = { planet_stability >= 34 }
                    set_variable = { which = stability_production_modifier value = 0.34 }
                } else_if = { limit = { planet_stability >= 33 }
                    set_variable = { which = stability_production_modifier value = 0.33 }
                } else_if = { limit = { planet_stability >= 32 }
                    set_variable = { which = stability_production_modifier value = 0.32 }
                } else_if = { limit = { planet_stability >= 31 }
                    set_variable = { which = stability_production_modifier value = 0.31 }
                } else_if = { limit = { planet_stability >= 30 }
                    set_variable = { which = stability_production_modifier value = 0.30 }
                } else_if = { limit = { planet_stability >= 29 }
                    set_variable = { which = stability_production_modifier value = 0.29 }
                } else_if = { limit = { planet_stability >= 28 }
                    set_variable = { which = stability_production_modifier value = 0.28 }
                } else_if = { limit = { planet_stability >= 27 }
                    set_variable = { which = stability_production_modifier value = 0.27 }
                } else_if = { limit = { planet_stability >= 26 }
                    set_variable = { which = stability_production_modifier value = 0.26 }
                } else_if = { limit = { planet_stability >= 25 }
                    set_variable = { which = stability_production_modifier value = 0.25 }
                } else_if = { limit = { planet_stability >= 24 }
                    set_variable = { which = stability_production_modifier value = 0.24 }
                } else_if = { limit = { planet_stability >= 23 }
                    set_variable = { which = stability_production_modifier value = 0.23 }
                } else_if = { limit = { planet_stability >= 22 }
                    set_variable = { which = stability_production_modifier value = 0.22 }
                } else_if = { limit = { planet_stability >= 21 }
                    set_variable = { which = stability_production_modifier value = 0.21 }
                } else_if = { limit = { planet_stability >= 20 }
                    set_variable = { which = stability_production_modifier value = 0.20 }
                } else_if = { limit = { planet_stability >= 19 }
                    set_variable = { which = stability_production_modifier value = 0.19 }
                } else_if = { limit = { planet_stability >= 18 }
                    set_variable = { which = stability_production_modifier value = 0.18 }
                } else_if = { limit = { planet_stability >= 17 }
                    set_variable = { which = stability_production_modifier value = 0.17 }
                } else_if = { limit = { planet_stability >= 16 }
                    set_variable = { which = stability_production_modifier value = 0.16 }
                } else_if = { limit = { planet_stability >= 15 }
                    set_variable = { which = stability_production_modifier value = 0.15 }
                } else_if = { limit = { planet_stability >= 14 }
                    set_variable = { which = stability_production_modifier value = 0.14 }
                } else_if = { limit = { planet_stability >= 13 }
                    set_variable = { which = stability_production_modifier value = 0.13 }
                } else_if = { limit = { planet_stability >= 12 }
                    set_variable = { which = stability_production_modifier value = 0.12 }
                } else_if = { limit = { planet_stability >= 11 }
                    set_variable = { which = stability_production_modifier value = 0.11 }
                } else_if = { limit = { planet_stability >= 10 }
                    set_variable = { which = stability_production_modifier value = 0.10 }
                } else_if = { limit = { planet_stability >= 9 }
                    set_variable = { which = stability_production_modifier value = 0.09 }
                } else_if = { limit = { planet_stability >= 8 }
                    set_variable = { which = stability_production_modifier value = 0.08 }
                } else_if = { limit = { planet_stability >= 7 }
                    set_variable = { which = stability_production_modifier value = 0.07 }
                } else_if = { limit = { planet_stability >= 6 }
                    set_variable = { which = stability_production_modifier value = 0.06 }
                } else_if = { limit = { planet_stability >= 5 }
                    set_variable = { which = stability_production_modifier value = 0.05 }
                } else_if = { limit = { planet_stability >= 4 }
                    set_variable = { which = stability_production_modifier value = 0.04 }
                } else_if = { limit = { planet_stability >= 3 }
                    set_variable = { which = stability_production_modifier value = 0.03 }
                } else_if = { limit = { planet_stability >= 2 }
                    set_variable = { which = stability_production_modifier value = 0.02 }
                } else_if = { limit = { planet_stability >= 1 }
                    set_variable = { which = stability_production_modifier value = 0.01 }
                } else_if = { limit = { planet_stability >= 0 }
                    set_variable = { which = stability_production_modifier value = 0.00 }
                }
                subtract_variable = { which = stability_production_modifier value = 0.5 }
                multiply_variable = { which = stability_production_modifier value = 0.6 }

                change_variable = { which = job_production_modifier value = stability_production_modifier }
                set_variable = { which = stability_production_modifier value = 0 }

                change_variable = { which = job_production_modifier value = 1 }



                every_owned_pop = {

                    #Pop upkeep (pop categories)
                    if = {
                        limit = { is_pop_category = ruler }
                        if = {
                            limit = { is_unemployed = yes }
                            if = {
                                limit = { PREV = { has_modifier = unemployment_benefits }}
                                PREV = { change_variable = { which = planet_consumer_goods_upkeep value = -2 }}
                            }
                            if = {
                                limit = { PREV = { has_modifier = standby_mode }}
                                PREV = { change_variable = { which = planet_energy_upkeep value = -2 }}
                            }
                        }
                        
                        if = {
                            limit = {
                                is_organic_species = yes
                                has_shared_burden_living_standard_type = yes
                                owner = { is_primitive = no }
                            }
                            PREV = { set_variable = { which = pop_food_consumption value = @living_standard_food_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_shared_burden }}		
                        }
                        else_if = {
                            limit = { 
                                is_organic_species = yes
                                owner = { is_primitive = no }
                                OR = {
                                    has_academic_living_standard_type = yes
                                    has_very_high_living_standard_type = yes
                                    has_high_living_standard_type = yes
                                    has_normal_living_standard_type = yes
                                    has_stratified_living_standard_type = yes
                                }		
                            }
                            PREV = { set_variable = { which = pop_food_consumption value = @living_standard_food_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_very_high }}
                        }
                        else_if = {
                            limit = {
                                is_organic_species = yes
                                has_low_living_standard_type = yes
                                owner = { is_primitive = no }
                            }
                            PREV = { set_variable = { which = pop_food_consumption value = @living_standard_food_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_high }}
                        }
                        else_if = {
                            limit = {
                                owner = { is_primitive = yes }
                            }
                            PREV = { set_variable = { which = pop_food_consumption value = @living_standard_food_normal }}
                        }
                        
                        else_if = {
                            limit = {
                                is_robotic_species = yes
                                has_shared_burden_living_standard_type = yes
                            }
                            PREV = { set_variable = { which = pop_energy_consumption value = @living_standard_energy_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_shared_burden }}
                        }
                        else_if = {
                            limit = {
                                is_robotic_species = yes
                                OR = {
                                    has_academic_living_standard_type = yes
                                    has_very_high_living_standard_type = yes
                                    has_high_living_standard_type = yes
                                    has_normal_living_standard_type = yes
                                    has_stratified_living_standard_type = yes
                                }
                            }
                            PREV = { set_variable = { which = pop_energy_consumption value = @living_standard_energy_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_very_high }}
                        }
                        else_if = {
                            limit = {
                                is_robotic_species = yes
                                has_low_living_standard_type = yes
                            }
                            PREV = { set_variable = { which = pop_energy_consumption value = @living_standard_energy_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_high }}
                        }
                    }

                    else_if = {
                        limit = { is_pop_category = specialist }
                        if = {
                            limit = { is_unemployed = yes }
                            if = {
                                limit = { PREV = { has_modifier = unemployment_benefits }}
                                PREV = { change_variable = { which = planet_consumer_goods_upkeep value = -2 }}
                            }
                            if = {
                                limit = { PREV = { has_modifier = standby_mode }}
                                PREV = { change_variable = { which = planet_energy_upkeep value = -2 }}
                            }
                        }
                        
                        if = {
                            limit = {
                                is_organic_species = yes
                                has_shared_burden_living_standard_type = yes
                                owner = { is_primitive = no }
                            }
                            PREV = { set_variable = { which = pop_food_consumption value = @living_standard_food_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_shared_burden }}
                        }
                        else_if = {
                            limit = {
                                is_organic_species = yes
                                owner = { is_primitive = no }
                                OR = {
                                    has_academic_living_standard_type = yes
                                    has_very_high_living_standard_type = yes
                                }
                            }
                            PREV = { set_variable = { which = pop_food_consumption value = @living_standard_food_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_very_high }}
                        }
                        else_if = {
                            limit = {
                                is_organic_species = yes
                                owner = { is_primitive = no }
                                OR = {
                                    has_high_living_standard_type = yes
                                    has_normal_living_standard_type = yes
                                    has_stratified_living_standard_type = yes
                                }
                            }
                            PREV = { set_variable = { which = pop_food_consumption value = @living_standard_food_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_high }}
                        }
                        else_if = {
                            limit = {
                                is_organic_species = yes
                                has_low_living_standard_type = yes
                                owner = { is_primitive = no }
                            }
                            PREV = { set_variable = { which = pop_food_consumption value = @living_standard_food_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_normal }}
                        }
                        # Primitives
                        else_if = {
                            limit = {
                                owner = { is_primitive = yes }
                            }
                            PREV = { set_variable = { which = pop_food_consumption value = @living_standard_food_normal }}
                        }
                        
                        # Robotic Upkeep
                        else_if = {
                            limit = {
                                is_robotic_species = yes
                                has_shared_burden_living_standard_type = yes
                            }
                            PREV = { set_variable = { which = pop_energy_consumption value = @living_standard_energy_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_very_high }}
                        }
                        else_if = {
                            limit = {
                                is_robotic_species = yes
                                OR = {
                                    has_academic_living_standard_type = yes
                                    has_very_high_living_standard_type = yes
                                }
                            }
                            PREV = { set_variable = { which = pop_energy_consumption value = @living_standard_energy_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_very_high }}
                        }
                        else_if = {
                            limit = {
                                is_robotic_species = yes
                                has_high_living_standard_type = yes
                            }
                            PREV = { set_variable = { which = pop_energy_consumption value = @living_standard_energy_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_high }}
                        }
                        else_if = {
                            limit = {
                                is_robotic_species = yes
                                has_normal_living_standard_type = yes
                            }
                            PREV = { set_variable = { which = pop_energy_consumption value = @living_standard_energy_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_high }}
                        }
                        else_if = {
                            limit = {
                                is_robotic_species = yes
                                has_stratified_living_standard_type = yes
                            }
                            PREV = { set_variable = { which = pop_energy_consumption value = @living_standard_energy_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_high }}
                        }
                        else_if = {
                            limit = {
                                is_robotic_species = yes
                                has_low_living_standard_type = yes
                            }
                            PREV = { set_variable = { which = pop_energy_consumption value = @living_standard_energy_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_normal }}
                        }
                    }
                    
                    else_if = {
                        limit = { is_pop_category = worker }
                        if = {
                            limit = { is_unemployed = yes }
                            if = {
                                limit = { PREV = { has_modifier = unemployment_benefits }}
                                PREV = { change_variable = { which = planet_consumer_goods_upkeep value = -2 }}
                            }
                            if = {
                                limit = { PREV = { has_modifier = standby_mode }}
                                PREV = { change_variable = { which = planet_energy_upkeep value = -2 }}
                            }
                        }
                        
                        if = {
                            limit = {
                                is_organic_species = yes
                                has_shared_burden_living_standard_type = yes
                                owner = { is_primitive = no }
                            }
                            PREV = { set_variable = { which = pop_food_consumption value = @living_standard_food_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_shared_burden }}
                        }
                        else_if = {
                            limit = {
                                is_organic_species = yes
                                has_very_high_living_standard_type = yes
                                owner = { is_primitive = no }
                            }
                            PREV = { set_variable = { which = pop_food_consumption value = @living_standard_food_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_very_high }}
                        }
                        else_if = {
                            limit = {
                                is_organic_species = yes
                                has_high_living_standard_type = yes
                                owner = { is_primitive = no }
                            }
                            PREV = { set_variable = { which = pop_food_consumption value = @living_standard_food_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_high }}
                        }
                        else_if = {
                            limit = {
                                is_organic_species = yes
                                owner = { is_primitive = no }
                                OR = {
                                    has_normal_living_standard_type = yes
                                    has_academic_living_standard_type = yes
                                }
                            }
                            PREV = { set_variable = { which = pop_food_consumption value = @living_standard_food_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_normal }}
                        }
                        else_if = {
                            limit = {
                                is_organic_species = yes
                                has_stratified_living_standard_type = yes
                                owner = { is_primitive = no }
                            }
                            PREV = { set_variable = { which = pop_food_consumption value = @living_standard_food_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_low }}
                        }
                        else_if = {
                            limit = { 
                                is_organic_species = yes
                                has_low_living_standard_type = yes
                                owner = { is_primitive = no }
                            }
                            PREV = { set_variable = { which = pop_food_consumption value = @living_standard_food_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_very_low }}
                        }
                        # Primitives
                        else_if = {
                            limit = {
                                owner = { is_primitive = yes }
                            }
                            PREV = { set_variable = { which = pop_food_consumption value = @living_standard_food_normal }}
                        }
                        
                        # Robotic Upkeep
                        else_if = {
                            limit = {
                                is_robotic_species = yes
                                has_shared_burden_living_standard_type = yes
                            }
                            PREV = { set_variable = { which = pop_energy_consumption value = @living_standard_energy_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_shared_burden }}
                        }			
                        else_if = {
                            limit = { 
                                is_robotic_species = yes
                                has_very_high_living_standard_type = yes
                            }
                            PREV = { set_variable = { which = pop_energy_consumption value = @living_standard_energy_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_very_high }}
                        }		
                        else_if = {
                            limit = { 
                                is_robotic_species = yes
                                has_high_living_standard_type = yes
                            }
                            PREV = { set_variable = { which = pop_energy_consumption value = @living_standard_energy_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_high }}
                        }		
                        else_if = {
                            limit = { 
                                is_robotic_species = yes 
                                OR = {
                                    has_normal_living_standard_type = yes
                                    has_academic_living_standard_type = yes
                                }
                            }
                            PREV = { set_variable = { which = pop_energy_consumption value = @living_standard_energy_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_normal }}
                        }		
                        else_if = {
                            limit = { 
                                is_robotic_species = yes
                                has_stratified_living_standard_type = yes
                            }
                            PREV = { set_variable = { which = pop_energy_consumption value = @living_standard_energy_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_low }}
                        }	
                        else_if = {
                            limit = { 
                                is_robotic_species = yes
                                has_low_living_standard_type = yes
                            }
                            PREV = { set_variable = { which = pop_energy_consumption value = @living_standard_energy_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_very_low }}
                        }
                    }
                    
                    else_if = {
                        limit = { is_pop_category = complex_drone }
                        if = {
                            limit = { is_unemployed = yes }
                            if = {
                                limit = { PREV = { has_modifier = standby_mode }}
                                PREV = { change_variable = { which = planet_energy_upkeep value = -2 }}
                            }
                        }
                        
                        if = {
                            limit = { 
                                is_organic_species = yes
                            }
                            PREV = { set_variable = { which = pop_food_consumption value = @living_standard_food_normal }}
                        }

                        else_if = {
                            limit = { 
                                is_robotic_species = yes
                            }
                            PREV = { set_variable = { which = pop_energy_consumption value = @living_standard_energy_normal }}
                        }
                    }
                    
                    else_if = {
                        limit = { is_pop_category = simple_drone }
                        if = {
                            limit = { is_unemployed = yes }
                            if = {
                                limit = { owner = { is_hive_empire = yes }}
                                PREV = { change_variable = { which = planet_minerals_upkeep value = -1 }}
                            }
                            if = {
                                limit = {
                                    PREV = { has_modifier = standby_mode }
                                    owner = { is_machine_empire = yes }
                                }
                                PREV = { change_variable = { which = planet_energy_upkeep value = -2 }}
                            }
                            if = {
                                limit = {
                                    PREV = { has_modifier = standby_mode }
                                    owner = { is_hive_empire = yes }
                                }
                                PREV = { change_variable = { which = planet_energy_upkeep value = -2 }}
                            }
                        }
                        
                        if = {
                            limit = { 
                                is_organic_species = yes
                            }
                            PREV = { set_variable = { which = pop_food_consumption value = @living_standard_food_normal }}
                        }

                        else_if = {
                            limit = { 
                                is_robotic_species = yes
                            }
                            PREV = { set_variable = { which = pop_energy_consumption value = @living_standard_energy_normal }}
                        }
                    }
                    
                    else_if = {
                        limit = { is_pop_category = robot_servant }
                        PREV = { set_variable = { which = pop_energy_consumption value = @living_standard_energy_normal }}
                    }
                    
                    else_if = {
                        limit = { is_pop_category = slave }
                        if = {
                            limit = { 
                                is_organic_species = yes
                                has_very_high_living_standard_type = yes
                            }
                            PREV = { set_variable = { which = pop_food_consumption value = @living_standard_food_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_low }}
                        }		
                        else_if = {
                            limit = { 
                                is_organic_species = yes
                                has_high_living_standard_type = yes
                            }
                            PREV = { set_variable = { which = pop_food_consumption value = @living_standard_food_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_low }}
                        }		
                        else_if = {
                            limit = { 
                                is_organic_species = yes
                                OR = {
                                    has_normal_living_standard_type = yes
                                    has_academic_living_standard_type = yes
                                }
                            }
                            PREV = { set_variable = { which = pop_food_consumption value = @living_standard_food_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_very_low }}
                        }		
                        else_if = {
                            limit = { 
                                is_organic_species = yes
                                OR = {
                                    has_low_living_standard_type = yes
                                    has_stratified_living_standard_type = yes
                                }			
                            }
                            PREV = { set_variable = { which = pop_food_consumption value = @living_standard_food_normal }}
                        }	
                        
                        # Robotic Upkeep
                        else_if = {
                            limit = { 
                                is_robotic_species = yes
                                has_very_high_living_standard_type = yes
                            }
                            PREV = { set_variable = { which = pop_energy_consumption value = @living_standard_energy_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_low }}
                        }		
                        else_if = {
                            limit = { 
                                is_robotic_species = yes
                                has_high_living_standard_type = yes
                            }
                            PREV = { set_variable = { which = pop_energy_consumption value = @living_standard_energy_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_low }}
                        }		
                        else_if = {
                            limit = { 
                                is_robotic_species = yes
                                OR = {
                                    has_normal_living_standard_type = yes
                                    has_academic_living_standard_type = yes
                                }
                            }
                            PREV = { set_variable = { which = pop_energy_consumption value = @living_standard_energy_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_very_low }}
                        }		
                        else_if = {
                            limit = { 
                                is_robotic_species = yes
                                has_stratified_living_standard_type = yes
                            }
                            PREV = { set_variable = { which = pop_energy_consumption value = @living_standard_energy_normal }}
                        }
                    }
                    
                    else_if = {
                        limit = { is_pop_category = bio_trophy }
                        PREV = { set_variable = { which = pop_food_consumption value = @living_standard_food_normal }}
                        PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_very_high }}
                    }
                    
                    else_if = {
                        limit = { is_pop_category = criminal }
                        if = {
                            limit = {
                                is_organic_species = yes
                                has_shared_burden_living_standard_type = yes
                            }
                            PREV = { set_variable = { which = pop_food_consumption value = @living_standard_food_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_shared_burden }}
                        }			
                        else_if = {
                            limit = { 
                                is_organic_species = yes
                                has_very_high_living_standard_type = yes
                            }
                            PREV = { set_variable = { which = pop_food_consumption value = @living_standard_food_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_very_high }}
                        }		
                        else_if = {
                            limit = { 
                                is_organic_species = yes
                                has_high_living_standard_type = yes
                            }
                            PREV = { set_variable = { which = pop_food_consumption value = @living_standard_food_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_high }}
                        }		
                        else_if = {
                            limit = { 
                                is_organic_species = yes
                                OR = {
                                    has_normal_living_standard_type = yes
                                    has_academic_living_standard_type = yes
                                }
                            }
                            PREV = { set_variable = { which = pop_food_consumption value = @living_standard_food_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_normal }}
                        }		
                        else_if = {
                            limit = { 
                                is_organic_species = yes
                                has_stratified_living_standard_type = yes
                            }
                            PREV = { set_variable = { which = pop_food_consumption value = @living_standard_food_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_low }}
                        }	
                        else_if = {
                            limit = { 
                                is_organic_species = yes
                                has_low_living_standard_type = yes
                            }
                            PREV = { set_variable = { which = pop_food_consumption value = @living_standard_food_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_very_low }}
                        }
                        
                        # Robotic Upkeep
                        else_if = {
                            limit = {
                                is_robotic_species = yes
                                has_shared_burden_living_standard_type = yes
                            }
                            PREV = { set_variable = { which = pop_energy_consumption value = @living_standard_energy_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_shared_burden }}
                        }			
                        else_if = {
                            limit = { 
                                is_robotic_species = yes
                                has_very_high_living_standard_type = yes
                            }
                            PREV = { set_variable = { which = pop_energy_consumption value = @living_standard_energy_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_very_high }}
                        }		
                        else_if = {
                            limit = { 
                                is_robotic_species = yes
                                has_high_living_standard_type = yes
                            }
                            PREV = { set_variable = { which = pop_energy_consumption value = @living_standard_energy_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_high }}
                        }		
                        else_if = {
                            limit = { 
                                is_robotic_species = yes 
                                has_normal_living_standard_type = yes
                            }
                            PREV = { set_variable = { which = pop_energy_consumption value = @living_standard_energy_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_normal }}
                        }		
                        else_if = {
                            limit = { 
                                is_robotic_species = yes
                                has_stratified_living_standard_type = yes
                            }
                            PREV = { set_variable = { which = pop_energy_consumption value = @living_standard_energy_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_low }}
                        }	
                        else_if = {
                            limit = { 
                                is_robotic_species = yes
                                has_low_living_standard_type = yes
                            }
                            PREV = { set_variable = { which = pop_energy_consumption value = @living_standard_energy_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_very_low }}
                        }
                    }
                    
                    else_if = {
                        limit = { is_pop_category = deviant_drone }
                        if = {
                            limit = {
                                is_organic_species = yes
                                has_shared_burden_living_standard_type = yes
                            }
                            PREV = { set_variable = { which = pop_food_consumption value = @living_standard_food_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_shared_burden }}
                        }			
                        else_if = {
                            limit = { 
                                is_organic_species = yes
                                has_very_high_living_standard_type = yes
                            }
                            PREV = { set_variable = { which = pop_food_consumption value = @living_standard_food_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_very_high }}
                        }		
                        else_if = {
                            limit = { 
                                is_organic_species = yes
                                has_high_living_standard_type = yes
                            }
                            PREV = { set_variable = { which = pop_food_consumption value = @living_standard_food_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_high }}
                        }		
                        else_if = {
                            limit = { 
                                is_organic_species = yes
                                OR = {
                                    has_normal_living_standard_type = yes
                                    has_academic_living_standard_type = yes
                                }
                            }
                            PREV = { set_variable = { which = pop_food_consumption value = @living_standard_food_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_normal }}
                        }		
                        else_if = {
                            limit = { 
                                is_organic_species = yes
                                has_stratified_living_standard_type = yes
                            }
                            PREV = { set_variable = { which = pop_food_consumption value = @living_standard_food_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_low }}
                        }	
                        else_if = {
                            limit = { 
                                is_organic_species = yes
                                has_low_living_standard_type = yes
                            }
                            PREV = { set_variable = { which = pop_food_consumption value = @living_standard_food_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_very_low }}
                        }
                        
                        # Robotic Upkeep
                        else_if = {
                            limit = {
                                is_robotic_species = yes
                                has_shared_burden_living_standard_type = yes
                            }
                            PREV = { set_variable = { which = pop_energy_consumption value = @living_standard_energy_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_shared_burden }}
                        }			
                        else_if = {
                            limit = { 
                                is_robotic_species = yes
                                has_very_high_living_standard_type = yes
                            }
                            PREV = { set_variable = { which = pop_energy_consumption value = @living_standard_energy_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_very_high }}
                        }		
                        else_if = {
                            limit = { 
                                is_robotic_species = yes
                                has_high_living_standard_type = yes
                            }
                            PREV = { set_variable = { which = pop_energy_consumption value = @living_standard_energy_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_high }}
                        }		
                        else_if = {
                            limit = { 
                                is_robotic_species = yes 
                                has_normal_living_standard_type = yes
                            }
                            PREV = { set_variable = { which = pop_energy_consumption value = @living_standard_energy_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_normal }}
                        }		
                        else_if = {
                            limit = { 
                                is_robotic_species = yes
                                has_stratified_living_standard_type = yes
                            }
                            PREV = { set_variable = { which = pop_energy_consumption value = @living_standard_energy_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_low }}
                        }	
                        else_if = {
                            limit = { 
                                is_robotic_species = yes
                                has_low_living_standard_type = yes
                            }
                            PREV = { set_variable = { which = pop_energy_consumption value = @living_standard_energy_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_very_low }}
                        }
                    }
                    
                    else_if = {
                        limit = { is_pop_category = corrupt_drone }
                        if = {
                            limit = {
                                is_organic_species = yes
                                has_shared_burden_living_standard_type = yes
                            }
                            PREV = { set_variable = { which = pop_food_consumption value = @living_standard_food_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_shared_burden }}
                        }			
                        else_if = {
                            limit = { 
                                is_organic_species = yes
                                has_very_high_living_standard_type = yes
                            }
                            PREV = { set_variable = { which = pop_food_consumption value = @living_standard_food_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_very_high }}
                        }		
                        else_if = {
                            limit = { 
                                is_organic_species = yes
                                has_high_living_standard_type = yes
                            }
                            PREV = { set_variable = { which = pop_food_consumption value = @living_standard_food_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_high }}
                        }		
                        else_if = {
                            limit = { 
                                is_organic_species = yes
                                OR = {
                                    has_normal_living_standard_type = yes
                                    has_academic_living_standard_type = yes
                                }
                            }
                            PREV = { set_variable = { which = pop_food_consumption value = @living_standard_food_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_normal }}
                        }		
                        else_if = {
                            limit = { 
                                is_organic_species = yes
                                has_stratified_living_standard_type = yes
                            }
                            PREV = { set_variable = { which = pop_food_consumption value = @living_standard_food_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_low }}
                        }	
                        else_if = {
                            limit = { 
                                is_organic_species = yes
                                has_low_living_standard_type = yes
                            }
                            PREV = { set_variable = { which = pop_food_consumption value = @living_standard_food_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_very_low }}
                        }
                        
                        # Robotic Upkeep
                        else_if = {
                            limit = {
                                is_robotic_species = yes
                                has_shared_burden_living_standard_type = yes
                            }
                            PREV = { set_variable = { which = pop_energy_consumption value = @living_standard_energy_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_shared_burden }}
                        }			
                        else_if = {
                            limit = { 
                                is_robotic_species = yes
                                has_very_high_living_standard_type = yes
                            }
                            PREV = { set_variable = { which = pop_energy_consumption value = @living_standard_energy_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_very_high }}
                        }		
                        else_if = {
                            limit = { 
                                is_robotic_species = yes
                                has_high_living_standard_type = yes
                            }
                            PREV = { set_variable = { which = pop_energy_consumption value = @living_standard_energy_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_high }}
                        }		
                        else_if = {
                            limit = { 
                                is_robotic_species = yes 
                                has_normal_living_standard_type = yes
                            }
                            PREV = { set_variable = { which = pop_energy_consumption value = @living_standard_energy_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_normal }}
                        }		
                        else_if = {
                            limit = { 
                                is_robotic_species = yes
                                has_stratified_living_standard_type = yes
                            }
                            PREV = { set_variable = { which = pop_energy_consumption value = @living_standard_energy_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_low }}
                        }	
                        else_if = {
                            limit = { 
                                is_robotic_species = yes
                                has_low_living_standard_type = yes
                            }
                            PREV = { set_variable = { which = pop_energy_consumption value = @living_standard_energy_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_very_low }}
                        }
                    }
                    
                    else_if = {
                        limit = { is_pop_category = precursor }
                        if = {
                            limit = { 
                                is_organic_species = yes
                                exists = owner
                                owner = { 
                                    is_spiritualist = no
                                }
                            }
                            PREV = { set_variable = { which = pop_food_consumption value = 2.0 }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = 2.0 }}
                        }	
                
                        else_if = {
                            limit = { 
                                is_organic_species = yes
                                exists = owner
                                owner = { 
                                    is_spiritualist = yes
                                }
                            }
                            PREV = { set_variable = { which = pop_food_consumption value = 1.0 }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = 1.0 }}
                        }			
                        
                        # Robotic Upkeep
                        else_if = {
                            limit = { 
                                is_robotic_species = yes
                            }
                            PREV = { set_variable = { which = pop_energy_consumption value = @living_standard_energy_normal }}
                        }
                    }
                    
                    else_if = {
                        limit = { is_pop_category = xeno_ward }
                        if = {
                            limit = { 
                                is_organic_species = yes
                            }
                            PREV = { set_variable = { which = pop_food_consumption value = @living_standard_food_normal }}
                            PREV = { set_variable = { which = pop_consumer_goods_consumption value = @living_standard_luxuries_very_high }}
                        }			
                        
                        # Robotic Upkeep
                        else_if = {
                            limit = { 
                                is_robotic_species = yes
                            }
                            PREV = { set_variable = { which = pop_energy_consumption value = @living_standard_energy_normal }}
                        }
                    }

                    #Habitability
                    PREV = {
                        if = {
                            limit = { habitability = { who = PREV value < 0.05 }}
                            multiply_variable = { which = pop_food_consumption value = 2 }
                            multiply_variable = { which = pop_consumer_goods_consumption value = 2 }
                            multiply_variable = { which = pop_energy_consumption value = 2 }
                        }
                        else_if = {
                            limit = { habitability = { who = PREV value < 0.1 }}
                            multiply_variable = { which = pop_food_consumption value = 1.95 }
                            multiply_variable = { which = pop_consumer_goods_consumption value = 1.95 }
                            multiply_variable = { which = pop_energy_consumption value = 1.95 }
                        }
                        else_if = {
                            limit = { habitability = { who = PREV value < 0.15 }}
                            multiply_variable = { which = pop_food_consumption value = 1.9 }
                            multiply_variable = { which = pop_consumer_goods_consumption value = 1.9 }
                            multiply_variable = { which = pop_energy_consumption value = 1.9 }
                        }
                        else_if = {
                            limit = { habitability = { who = PREV value < 0.2 }}
                            multiply_variable = { which = pop_food_consumption value = 1.85 }
                            multiply_variable = { which = pop_consumer_goods_consumption value = 1.85 }
                            multiply_variable = { which = pop_energy_consumption value = 1.85 }
                        }
                        else_if = {
                            limit = { habitability = { who = PREV value < 0.25 }}
                            multiply_variable = { which = pop_food_consumption value = 1.8 }
                            multiply_variable = { which = pop_consumer_goods_consumption value = 1.8 }
                            multiply_variable = { which = pop_energy_consumption value = 1.8 }
                        }
                        else_if = {
                            limit = { habitability = { who = PREV value < 0.3 }}
                            multiply_variable = { which = pop_food_consumption value = 1.75 }
                            multiply_variable = { which = pop_consumer_goods_consumption value = 1.75 }
                            multiply_variable = { which = pop_energy_consumption value = 1.75 }
                        }
                        else_if = {
                            limit = { habitability = { who = PREV value < 0.35 }}
                            multiply_variable = { which = pop_food_consumption value = 1.7 }
                            multiply_variable = { which = pop_consumer_goods_consumption value = 1.7 }
                            multiply_variable = { which = pop_energy_consumption value = 1.7 }
                        }
                        else_if = {
                            limit = { habitability = { who = PREV value < 0.4 }}
                            multiply_variable = { which = pop_food_consumption value = 1.65 }
                            multiply_variable = { which = pop_consumer_goods_consumption value = 1.65 }
                            multiply_variable = { which = pop_energy_consumption value = 1.65 }
                        }
                        else_if = {
                            limit = { habitability = { who = PREV value < 0.45 }}
                            multiply_variable = { which = pop_food_consumption value = 1.6 }
                            multiply_variable = { which = pop_consumer_goods_consumption value = 1.6 }
                            multiply_variable = { which = pop_energy_consumption value = 1.6 }
                        }
                        else_if = {
                            limit = { habitability = { who = PREV value < 0.5 }}
                            multiply_variable = { which = pop_food_consumption value = 1.55 }
                            multiply_variable = { which = pop_consumer_goods_consumption value = 1.55 }
                            multiply_variable = { which = pop_energy_consumption value = 1.55 }
                        }
                        else_if = {
                            limit = { habitability = { who = PREV value < 0.55 }}
                            multiply_variable = { which = pop_food_consumption value = 1.5 }
                            multiply_variable = { which = pop_consumer_goods_consumption value = 1.5 }
                            multiply_variable = { which = pop_energy_consumption value = 1.5 }
                        }
                        else_if = {
                            limit = { habitability = { who = PREV value < 0.6 }}
                            multiply_variable = { which = pop_food_consumption value = 1.45 }
                            multiply_variable = { which = pop_consumer_goods_consumption value = 1.45 }
                            multiply_variable = { which = pop_energy_consumption value = 1.45 }
                        }
                        else_if = {
                            limit = { habitability = { who = PREV value < 0.65 }}
                            multiply_variable = { which = pop_food_consumption value = 1.4 }
                            multiply_variable = { which = pop_consumer_goods_consumption value = 1.4 }
                            multiply_variable = { which = pop_energy_consumption value = 1.4 }
                        }
                        else_if = {
                            limit = { habitability = { who = PREV value < 0.7 }}
                            multiply_variable = { which = pop_food_consumption value = 1.35 }
                            multiply_variable = { which = pop_consumer_goods_consumption value = 1.35 }
                            multiply_variable = { which = pop_energy_consumption value = 1.35 }
                        }
                        else_if = {
                            limit = { habitability = { who = PREV value < 0.75 }}
                            multiply_variable = { which = pop_food_consumption value = 1.3 }
                            multiply_variable = { which = pop_consumer_goods_consumption value = 1.3 }
                            multiply_variable = { which = pop_energy_consumption value = 1.3 }
                        }
                        else_if = {
                            limit = { habitability = { who = PREV value < 0.8 }}
                            multiply_variable = { which = pop_food_consumption value = 1.25 }
                            multiply_variable = { which = pop_consumer_goods_consumption value = 1.25 }
                            multiply_variable = { which = pop_energy_consumption value = 1.25 }
                        }
                        else_if = {
                            limit = { habitability = { who = PREV value < 0.85 }}
                            multiply_variable = { which = pop_food_consumption value = 1.2 }
                            multiply_variable = { which = pop_consumer_goods_consumption value = 1.2 }
                            multiply_variable = { which = pop_energy_consumption value = 1.2 }
                        }
                        else_if = {
                            limit = { habitability = { who = PREV value < 0.9 }}
                            multiply_variable = { which = pop_food_consumption value = 1.15 }
                            multiply_variable = { which = pop_consumer_goods_consumption value = 1.15 }
                            multiply_variable = { which = pop_energy_consumption value = 1.15 }
                        }
                        else_if = {
                            limit = { habitability = { who = PREV value < 0.95 }}
                            multiply_variable = { which = pop_food_consumption value = 1.1 }
                            multiply_variable = { which = pop_consumer_goods_consumption value = 1.1 }
                            multiply_variable = { which = pop_energy_consumption value = 1.1 }
                        }
                        else_if = {
                            limit = { habitability = { who = PREV value < 1 }}
                            multiply_variable = { which = pop_food_consumption value = 1.05 }
                            multiply_variable = { which = pop_consumer_goods_consumption value = 1.05 }
                            multiply_variable = { which = pop_energy_consumption value = 1.05 }
                        }

                        subtract_variable = { which = planet_food_upkeep value = pop_food_consumption }
                        subtract_variable = { which = planet_consumer_goods_upkeep value = pop_consumer_goods_consumption }
                        subtract_variable = { which = planet_energy_upkeep value = pop_energy_consumption }

                        set_variable = { which = pop_food_consumption value = 0 }
                        set_variable = { which = pop_consumer_goods_consumption value = 0 }
                        set_variable = { which = pop_energy_consumption value = 0 }
                    }



                    

                    #Job production
                    if = {
                        limit = { has_job = livestock }
                        PREV = { change_variable = { which = job_food_output value = 4 }}
                    }
                    else_if = {
                        limit = { has_job = purge }
                        if = {
                            limit = { has_purge_type = { type = purge_processing }}
                            PREV = { change_variable = { which = job_food_output value = 6 }}
                        }
                        else_if = {
                            limit = { has_purge_type = { type = purge_labor_camps }}
                            PREV = { change_variable = { which = job_food_output value = 3 }}
                            PREV = { change_variable = { which = job_minerals_output value = 3 }}
                        }
                    }
                    else_if = {
                        limit = { has_job = colonist }
                        PREV = { change_variable = { which = job_food_output value = 1 }}
                    }
                    else_if = {
                        limit = { has_job = researcher }
                        PREV = { change_variable = { which = planet_consumer_goods_upkeep value = -2 }}
                    }
                    else_if = {
                        limit = { has_job = priest }
                        PREV = { change_variable = { which = planet_consumer_goods_upkeep value = -2 }}
                    }
                    else_if = {
                        limit = { has_job = foundry }
                        PREV = { change_variable = { which = job_alloys_output value = 3 }}
                        PREV = { change_variable = { which = planet_minerals_upkeep value = -6 }}
                    }
                    else_if = {
                        limit = { has_job = artisan }
                        PREV = { change_variable = { which = job_consumer_goods_output value = 6 }}
                        PREV = { change_variable = { which = planet_minerals_upkeep value = -6 }}
                    }
                    else_if = {
                        limit = { has_job = entertainer }
                        PREV = { change_variable = { which = planet_consumer_goods_upkeep value = -1 }}
                    }
                    else_if = {
                        limit = { has_job = culture_worker }
                        PREV = { change_variable = { which = planet_consumer_goods_upkeep value = -2 }}
                    }
                    else_if = {
                        limit = { has_job = chemist }
                        PREV = { change_variable = { which = job_volatile_motes_output value = 2 }}
                        PREV = { change_variable = { which = planet_minerals_upkeep value = -10 }}
                    }
                    else_if = {
                        limit = { has_job = translucer }
                        PREV = { change_variable = { which = job_rare_crystals_output value = 2 }}
                        PREV = { change_variable = { which = planet_minerals_upkeep value = -10 }}
                    }
                    else_if = {
                        limit = { has_job = gas_refiner }
                        PREV = { change_variable = { which = job_exotic_gases_output value = 2 }}
                        PREV = { change_variable = { which = planet_minerals_upkeep value = -10 }}
                    }
                    else_if = {
                        limit = { has_job = roboticist }
                        PREV = { change_variable = { which = planet_minerals_upkeep value = -6 }}
                    }
                    else_if = {
                        limit = { has_job = healthcare }
                        PREV = { change_variable = { which = planet_consumer_goods_upkeep value = -1 }}
                    }
                    else_if = {
                        limit = { has_job = manager }
                        PREV = { change_variable = { which = planet_consumer_goods_upkeep value = -2 }}
                    }
                    else_if = {
                        limit = { has_job = miner }
                        PREV = { change_variable = { which = job_minerals_output value = 4 }}
                    }
                    else_if = {
                        limit = { has_job = crystal_miner }
                        PREV = { change_variable = { which = job_rare_crystals_output value = 2 }}
                    }
                    else_if = {
                        limit = { has_job = gas_extractor }
                        PREV = { change_variable = { which = job_exotic_gases_output value = 2 }}
                    }
                    else_if = {
                        limit = { has_job = mote_harvester }
                        PREV = { change_variable = { which = job_volatile_motes_output value = 2 }}
                    }
                    else_if = {
                        limit = { has_job = farmer }
                        PREV = { change_variable = { which = job_food_output value = 6 }}
                    }
                    else_if = {
                        limit = { has_job = spawning_drone }
                        PREV = { change_variable = { which = planet_food_upkeep value = -5 }}
                    }
                    else_if = {
                        limit = { has_job = replicator }
                        PREV = { change_variable = { which = planet_minerals_upkeep value = -3 }}
                    }
                    else_if = {
                        limit = { has_job = synapse_drone }
                        PREV = { change_variable = { which = planet_food_upkeep value = -2 }}
                    }
                    else_if = {
                        limit = { has_job = brain_drone }
                        PREV = { change_variable = { which = planet_minerals_upkeep value = -6 }}
                    }
                    else_if = {
                        limit = { has_job = calculator }
                        PREV = { change_variable = { which = planet_minerals_upkeep value = -6 }}
                    }
                    else_if = {
                        limit = { has_job = artisan_drone }
                        PREV = { change_variable = { which = job_consumer_goods_output value = 6 }}
                        PREV = { change_variable = { which = planet_minerals_upkeep value = -6 }}
                    }
                    else_if = {
                        limit = { has_job = fabricator }
                        PREV = { change_variable = { which = job_alloys_output value = 3 }}
                        PREV = { change_variable = { which = planet_minerals_upkeep value = -6 }}
                    }
                    else_if = {
                        limit = { has_job = alloy_drone }
                        PREV = { change_variable = { which = job_alloys_output value = 3 }}
                        PREV = { change_variable = { which = planet_minerals_upkeep value = -6 }}
                    }
                    else_if = {
                        limit = { has_job = chemist_drone }
                        PREV = { change_variable = { which = job_volatile_motes_output value = 2 }}
                        PREV = { change_variable = { which = planet_minerals_upkeep value = -10 }}
                    }
                    else_if = {
                        limit = { has_job = translucer_drone }
                        PREV = { change_variable = { which = job_rare_crystals_output value = 2 }}
                        PREV = { change_variable = { which = planet_minerals_upkeep value = -10 }}
                    }
                    else_if = {
                        limit = { has_job = gas_refiner_drone }
                        PREV = { change_variable = { which = job_exotic_gases_output value = 2 }}
                        PREV = { change_variable = { which = planet_minerals_upkeep value = -10 }}
                    }
                    else_if = {
                        limit = { has_job = crystal_mining_drone }
                        PREV = { change_variable = { which = job_rare_crystals_output value = 2 }}
                    }
                    else_if = {
                        limit = { has_job = gas_extraction_drone }
                        PREV = { change_variable = { which = job_exotic_gases_output value = 2 }}
                    }
                    else_if = {
                        limit = { has_job = mote_harvesting_drone }
                        PREV = { change_variable = { which = job_volatile_motes_output value = 2 }}
                    }
                    else_if = {
                        limit = { has_job = mining_drone }
                        PREV = { change_variable = { which = job_minerals_output value = 4 }}
                    }
                    else_if = {
                        limit = { has_job = agri_drone }
                        PREV = { change_variable = { which = job_food_output value = 6 }}
                    }
                    else_if = {
                        limit = { has_job = hunter_gatherer }
                        PREV = { change_variable = { which = job_food_output value = 1 }}
                    }
                    else_if = {
                        limit = { has_job = peasant }
                        PREV = { change_variable = { which = job_food_output value = 2 }}
                    }
                    else_if = {
                        limit = { has_job = primitive_laborer }
                        PREV = { change_variable = { which = job_consumer_goods_output value = 2 }}
                        PREV = { change_variable = { which = planet_minerals_upkeep value = -2 }}
                    }
                    else_if = {
                        limit = { has_job = primitive_miner }
                        PREV = { change_variable = { which = job_minerals_output value = 3 }}
                    }
                    else_if = {
                        limit = { has_job = primitive_farmer }
                        PREV = { change_variable = { which = job_food_output value = 3 }}
                    }
                    else_if = {
                        limit = { has_job = ratling_scavenger }
                        PREV = { change_variable = { which = job_food_output value = 1 }}
                        PREV = { change_variable = { which = job_minerals_output value = 1 }}
                        PREV = { change_variable = { which = job_consumer_goods_output value = 1 }}
                    }
                    else_if = {
                        limit = { has_job = odd_factory_worker }
                        PREV = { change_variable = { which = job_alloys_output value = 4 }}
                    }
                    else_if = {
                        limit = { has_job = dimensional_portal_researcher }
                        PREV = {
                            change_variable = { which = planet_consumer_goods_upkeep value = -3 }
                            if = {
                                limit = { has_planet_flag = dportal_void }
                                change_variable = { which = job_dark_matter_output value = 0.2 }
                            }
                            if = {
                                limit = { has_planet_flag = dportal_void2 }
                                change_variable = { which = job_dark_matter_output value = 1 }
                            }
                            if = {
                                limit = { has_planet_flag = dportal_hell }
                                change_variable = { which = planet_consumer_goods_upkeep value = -3 }
                            }
                        }
                    }
                    else_if = {
                        limit = { has_job = dimensional_portal_researcher_gestalt }
                        PREV = {
                            if = {
                                limit = { owner = { is_gestalt = no }}
                                change_variable = { which = planet_consumer_goods_upkeep value = -3 }
                            }
                            if = {
                                limit = { has_planet_flag = dportal_void }
                                change_variable = { which = job_dark_matter_output value = 0.2 }
                            }
                            if = {
                                limit = { owner = { is_hive_empire = yes } }
                                change_variable = { which = planet_food_upkeep value = -3 }
                            }
                            if = {
                                limit = {
                                    has_planet_flag = dportal_hell
                                    owner = { is_gestalt = no }
                                }
                                change_variable = { which = planet_consumer_goods_upkeep value = -3 }
                            }
                        }
                    }
                    else_if = {
                        limit = { has_job = fe_acolyte_farm }
                        PREV = { change_variable = { which = job_food_output value = 8 }}
                    }
                    else_if = {
                        limit = { has_job = fe_acolyte_mine }
                        PREV = { change_variable = { which = job_minerals_output value = 6 }}
                    }
                    else_if = {
                        limit = { has_job = fe_acolyte_artisan }
                        PREV = { change_variable = { which = job_consumer_goods_output value = 3 }}
                    }

                    PREV = {

                        multiply_variable = { which = job_minerals_output value = job_production_modifier }
                        multiply_variable = { which = job_alloys_output value = job_production_modifier }
                        multiply_variable = { which = job_exotic_gases_output value = job_production_modifier }
                        multiply_variable = { which = job_rare_crystals_output value = job_production_modifier }
                        multiply_variable = { which = job_volatile_motes_output value = job_production_modifier }
                        #multiply_variable = { which = job_zro_output value = job_production_modifier }
                        multiply_variable = { which = job_dark_matter_output value = job_production_modifier }
                        #multiply_variable = { which = job_living_metal_output value = job_production_modifier }
                        multiply_variable = { which = job_food_output value = job_production_modifier }
                        multiply_variable = { which = job_consumer_goods_output value = job_production_modifier }
                        #multiply_variable = { which = job_energy_output value = job_production_modifier }

                        change_variable = { which = planet_minerals_output value = job_minerals_output }
                        change_variable = { which = planet_alloys_output value = job_alloys_output }
                        change_variable = { which = planet_exotic_gases_output value = job_exotic_gases_output }
                        change_variable = { which = planet_rare_crystals_output value = job_rare_crystals_output }
                        change_variable = { which = planet_volatile_motes_output value = job_volatile_motes_output }
                        #change_variable = { which = planet_zro_output value = job_zro_output }
                        change_variable = { which = planet_dark_matter_output value = job_dark_matter_output }
                        #change_variable = { which = planet_living_metal_output value = job_living_metal_output }
                        change_variable = { which = planet_food_output value = job_food_output }
                        change_variable = { which = planet_consumer_goods_output value = job_consumer_goods_output }
                        #change_variable = { which = planet_energy_output value = job_energy_output }

                        set_variable = { which = job_minerals_output value = 0 }
                        set_variable = { which = job_alloys_output value = 0 }
                        set_variable = { which = job_exotic_gases_output value = 0 }
                        set_variable = { which = job_rare_crystals_output value = 0 }
                        set_variable = { which = job_volatile_motes_output value = 0 }
                        set_variable = { which = job_zro_output value = 0 }
                        set_variable = { which = job_dark_matter_output value = 0 }
                        set_variable = { which = job_living_metal_output value = 0 }
                        set_variable = { which = job_food_output value = 0 }
                        set_variable = { which = job_consumer_goods_output value = 0 }
                        set_variable = { which = job_energy_output value = 0 }
                    }
                }



                #Buildings

                #Capitals
                if = {
                    limit = { has_building = building_colony_shelter }
                    change_variable = { which = planet_energy_upkeep value = -1 }
                }
                if = {
                    limit = { has_building = building_capital }
                    change_variable = { which = planet_energy_upkeep value = -3 }
                }
                if = {
                    limit = { has_building = building_major_capital }
                    change_variable = { which = planet_energy_upkeep value = -5 }
                }
                if = {
                    limit = { has_building = building_system_capital }
                    change_variable = { which = planet_energy_upkeep value = -10 }
                }
                if = {
                    limit = { has_building = building_deployment_post }
                    change_variable = { which = planet_energy_upkeep value = -1 }
                }
                if = {
                    limit = { has_building = building_machine_capital }
                    change_variable = { which = planet_energy_upkeep value = -3 }
                }
                if = {
                    limit = { has_building = building_machine_major_capital }
                    change_variable = { which = planet_energy_upkeep value = -5 }
                }
                if = {
                    limit = { has_building = building_machine_system_capital }
                    change_variable = { which = planet_energy_upkeep value = -10 }
                }
                if = {
                    limit = { has_building = building_hive_capital }
                    change_variable = { which = planet_energy_upkeep value = -2 }
                }
                if = {
                    limit = { has_building = building_hive_major_capital }
                    change_variable = { which = planet_energy_upkeep value = -4 }
                }
                if = {
                    limit = { has_building = building_hab_capital }
                    change_variable = { which = planet_energy_upkeep value = -3 }
                    change_variable = { which = planet_alloys_upkeep value = -5 }
                }
                if = {
                    limit = { has_building = building_hab_major_capital }
                    change_variable = { which = planet_energy_upkeep value = -5 }
                    change_variable = { which = planet_alloys_upkeep value = -5 }
                }
                if = {
                    limit = { has_building = building_resort_capital }
                    change_variable = { which = planet_energy_upkeep value = -2 }
                }
                if = {
                    limit = { has_building = building_resort_major_capital }
                    change_variable = { which = planet_energy_upkeep value = -4 }
                }
                if = {
                    limit = { has_building = building_slave_capital }
                    change_variable = { which = planet_energy_upkeep value = -2 }
                }
                if = {
                    limit = { has_building = building_slave_major_capital }
                    change_variable = { which = planet_energy_upkeep value = -4 }
                }


                #Pop assembly buildings
                if = {
                    limit = { has_building = building_robot_assembly_plant }
                    if = { limit = { num_buildings = { type = building_robot_assembly_plant value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_robot_assembly_plant value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_robot_assembly_plant value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_robot_assembly_plant value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_robot_assembly_plant value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_robot_assembly_plant value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_robot_assembly_plant value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_robot_assembly_plant value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_robot_assembly_plant value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_robot_assembly_plant value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_robot_assembly_plant value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_robot_assembly_plant value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_robot_assembly_plant value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_robot_assembly_plant value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_robot_assembly_plant value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -5 }
                    }
                }

                if = {
                    limit = { has_building = building_machine_assembly_plant }
                    if = { limit = { num_buildings = { type = building_machine_assembly_plant value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_machine_assembly_plant value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_machine_assembly_plant value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_machine_assembly_plant value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_machine_assembly_plant value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_machine_assembly_plant value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_machine_assembly_plant value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_machine_assembly_plant value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_machine_assembly_plant value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_machine_assembly_plant value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_machine_assembly_plant value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_machine_assembly_plant value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_machine_assembly_plant value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_machine_assembly_plant value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_machine_assembly_plant value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -2 }
                    }
                }


                #Government buildings
                if = {
                    limit = { has_building = building_noble_estates }
                    if = { limit = { num_buildings = { type = building_noble_estates value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_noble_estates value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_noble_estates value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_noble_estates value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_noble_estates value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_noble_estates value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_noble_estates value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_noble_estates value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_noble_estates value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_noble_estates value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_noble_estates value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_noble_estates value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_noble_estates value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_noble_estates value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_noble_estates value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -2 }
                    }
                }
                
                if = {
                    limit = { has_building = building_bureaucratic_complex }
                    if = { limit = { num_buildings = { type = building_bureaucratic_complex value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_bureaucratic_complex value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_bureaucratic_complex value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_bureaucratic_complex value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_bureaucratic_complex value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_bureaucratic_complex value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_bureaucratic_complex value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_bureaucratic_complex value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_bureaucratic_complex value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_bureaucratic_complex value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_bureaucratic_complex value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_bureaucratic_complex value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_bureaucratic_complex value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_bureaucratic_complex value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_bureaucratic_complex value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -3 }
                    }
                }
                
                if = {
                    limit = { has_building = building_slave_processing }
                    if = { limit = { num_buildings = { type = building_slave_processing value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_slave_processing value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_slave_processing value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_slave_processing value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_slave_processing value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_slave_processing value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_slave_processing value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_slave_processing value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_slave_processing value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_slave_processing value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_slave_processing value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_slave_processing value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_slave_processing value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_slave_processing value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_slave_processing value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -2 }
                    }
                }
                
                if = {
                    limit = { has_building = building_precinct_house }
                    if = { limit = { num_buildings = { type = building_precinct_house value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_precinct_house value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_precinct_house value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_precinct_house value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_precinct_house value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_precinct_house value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_precinct_house value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_precinct_house value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_precinct_house value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_precinct_house value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_precinct_house value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_precinct_house value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_precinct_house value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_precinct_house value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_precinct_house value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -2 }
                    }
                }
                
                if = {
                    limit = { has_building = building_hall_judgment }
                    if = { limit = { num_buildings = { type = building_hall_judgment value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_hall_judgment value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_hall_judgment value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_hall_judgment value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_hall_judgment value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_hall_judgment value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_hall_judgment value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_hall_judgment value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_hall_judgment value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_hall_judgment value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_hall_judgment value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_hall_judgment value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_hall_judgment value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_hall_judgment value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_hall_judgment value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -4 }
                        change_variable = { which = planet_exotic_gases_upkeep value = -1 }
                    }
                }
                
                if = {
                    limit = { has_building = building_sentinel_posts }
                    if = { limit = { num_buildings = { type = building_sentinel_posts value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_sentinel_posts value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_sentinel_posts value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_sentinel_posts value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_sentinel_posts value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_sentinel_posts value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_sentinel_posts value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_sentinel_posts value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_sentinel_posts value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_sentinel_posts value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_sentinel_posts value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_sentinel_posts value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_sentinel_posts value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_sentinel_posts value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_sentinel_posts value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -2 }
                    }
                }
                
                if = {
                    limit = { has_building = building_psi_corps }
                    if = { limit = { num_buildings = { type = building_psi_corps value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_psi_corps value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_psi_corps value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_psi_corps value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_psi_corps value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_psi_corps value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_psi_corps value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_psi_corps value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_psi_corps value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_psi_corps value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_psi_corps value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_psi_corps value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_psi_corps value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_psi_corps value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_psi_corps value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -5 }
                    }
                }
                
                if = {
                    limit = { has_building = building_clone_vats }
                    if = { limit = { num_buildings = { type = building_clone_vats value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_clone_vats value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_clone_vats value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_clone_vats value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_clone_vats value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_clone_vats value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_clone_vats value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_clone_vats value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_clone_vats value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_clone_vats value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_clone_vats value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_clone_vats value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_clone_vats value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_clone_vats value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_clone_vats value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -2 }
                    }
                }
                

                #Resource buildings
                if = {
                    limit = { has_building = building_hydroponics_farm }
                    if = { limit = { num_buildings = { type = building_hydroponics_farm value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_hydroponics_farm value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_hydroponics_farm value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_hydroponics_farm value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_hydroponics_farm value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_hydroponics_farm value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_hydroponics_farm value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_hydroponics_farm value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_hydroponics_farm value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_hydroponics_farm value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_hydroponics_farm value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_hydroponics_farm value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_hydroponics_farm value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_hydroponics_farm value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_hydroponics_farm value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -2 }
                        if = {
                            limit = { owner =  { is_ai = yes }}
                            change_variable = { which = planet_food_output value = 1 }
                        }
                    }
                }
                
                if = {
                    limit = { has_building = building_food_processing_facility }
                    if = { limit = { num_buildings = { type = building_food_processing_facility value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_food_processing_facility value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_food_processing_facility value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_food_processing_facility value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_food_processing_facility value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_food_processing_facility value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_food_processing_facility value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_food_processing_facility value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_food_processing_facility value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_food_processing_facility value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_food_processing_facility value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_food_processing_facility value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_food_processing_facility value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_food_processing_facility value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_food_processing_facility value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -1 }
                    }
                }
                
                if = {
                    limit = { has_building = building_food_processing_center }
                    if = { limit = { num_buildings = { type = building_food_processing_center value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_food_processing_center value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_food_processing_center value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_food_processing_center value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_food_processing_center value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_food_processing_center value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_food_processing_center value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_food_processing_center value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_food_processing_center value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_food_processing_center value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_food_processing_center value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_food_processing_center value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_food_processing_center value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_food_processing_center value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_food_processing_center value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -1 }
                        change_variable = { which = planet_volatile_motes_upkeep value = -1 }
                    }
                }
                
                if = {
                    limit = { has_building = building_mineral_purification_plant }
                    if = { limit = { num_buildings = { type = building_mineral_purification_plant value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_mineral_purification_plant value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_mineral_purification_plant value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_mineral_purification_plant value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_mineral_purification_plant value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_mineral_purification_plant value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_mineral_purification_plant value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_mineral_purification_plant value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_mineral_purification_plant value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_mineral_purification_plant value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_mineral_purification_plant value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_mineral_purification_plant value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_mineral_purification_plant value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_mineral_purification_plant value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_mineral_purification_plant value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -1 }
                    }
                }
                
                if = {
                    limit = { has_building = building_mineral_purification_hub }
                    if = { limit = { num_buildings = { type = building_mineral_purification_hub value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_mineral_purification_hub value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_mineral_purification_hub value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_mineral_purification_hub value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_mineral_purification_hub value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_mineral_purification_hub value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_mineral_purification_hub value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_mineral_purification_hub value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_mineral_purification_hub value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_mineral_purification_hub value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_mineral_purification_hub value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_mineral_purification_hub value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_mineral_purification_hub value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_mineral_purification_hub value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_mineral_purification_hub value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -1 }
                        change_variable = { which = planet_volatile_motes_upkeep value = -1 }
                    }
                }
                
                if = {
                    limit = { has_building = building_energy_grid }
                    if = { limit = { num_buildings = { type = building_energy_grid value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_energy_grid value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_energy_grid value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_energy_grid value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_energy_grid value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_energy_grid value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_energy_grid value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_energy_grid value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_energy_grid value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_energy_grid value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_energy_grid value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_energy_grid value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_energy_grid value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_energy_grid value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_energy_grid value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -1 }
                    }
                }
                
                if = {
                    limit = { has_building = building_energy_nexus }
                    if = { limit = { num_buildings = { type = building_energy_nexus value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_energy_nexus value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_energy_nexus value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_energy_nexus value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_energy_nexus value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_energy_nexus value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_energy_nexus value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_energy_nexus value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_energy_nexus value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_energy_nexus value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_energy_nexus value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_energy_nexus value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_energy_nexus value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_energy_nexus value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_energy_nexus value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -1 }
                        change_variable = { which = planet_exotic_gases_upkeep value = -1 }
                    }
                }
                
                if = {
                    limit = { has_building = building_resource_silo }
                    if = { limit = { num_buildings = { type = building_resource_silo value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_resource_silo value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_resource_silo value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_resource_silo value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_resource_silo value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_resource_silo value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_resource_silo value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_resource_silo value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_resource_silo value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_resource_silo value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_resource_silo value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_resource_silo value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_resource_silo value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_resource_silo value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_resource_silo value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -1 }
                    }
                }
                
                if = {
                    limit = { has_building = building_bio_reactor }
                    if = { limit = { num_buildings = { type = building_bio_reactor value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_bio_reactor value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_bio_reactor value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_bio_reactor value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_bio_reactor value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_bio_reactor value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_bio_reactor value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_bio_reactor value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_bio_reactor value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_bio_reactor value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_bio_reactor value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_bio_reactor value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_bio_reactor value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_bio_reactor value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_bio_reactor value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_food_upkeep value = -25 }
                        if = {
                            limit = { owner = { NOT = { has_deficit = food }}}
                            change_variable = { which = planet_energy_output value = 20 }
                        }
                    }
                }


                #Manufacturing buildings
                if = {
                    limit = { has_building = building_foundry_1 }
                    if = { limit = { num_buildings = { type = building_foundry_1 value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_foundry_1 value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_foundry_1 value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_foundry_1 value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_foundry_1 value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_foundry_1 value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_foundry_1 value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_foundry_1 value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_foundry_1 value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_foundry_1 value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_foundry_1 value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_foundry_1 value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_foundry_1 value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_foundry_1 value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_foundry_1 value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -4 }
                    }
                }
                
                if = {
                    limit = { has_building = building_foundry_2 }
                    if = { limit = { num_buildings = { type = building_foundry_2 value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_foundry_2 value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_foundry_2 value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_foundry_2 value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_foundry_2 value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_foundry_2 value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_foundry_2 value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_foundry_2 value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_foundry_2 value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_foundry_2 value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_foundry_2 value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_foundry_2 value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_foundry_2 value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_foundry_2 value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_foundry_2 value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -5 }
                        change_variable = { which = planet_volatile_motes_upkeep value = -1 }
                    }
                }

                if = {
                    limit = { has_building = building_foundry_3 }
                    if = { limit = { num_buildings = { type = building_foundry_3 value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_foundry_3 value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_foundry_3 value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_foundry_3 value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_foundry_3 value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_foundry_3 value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_foundry_3 value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_foundry_3 value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_foundry_3 value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_foundry_3 value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_foundry_3 value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_foundry_3 value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_foundry_3 value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_foundry_3 value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_foundry_3 value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -6 }
                        change_variable = { which = planet_volatile_motes_upkeep value = -2 }
                    }
                }
                
                if = {
                    limit = { has_building = building_factory_1 }
                    if = { limit = { num_buildings = { type = building_factory_1 value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_factory_1 value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_factory_1 value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_factory_1 value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_factory_1 value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_factory_1 value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_factory_1 value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_factory_1 value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_factory_1 value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_factory_1 value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_factory_1 value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_factory_1 value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_factory_1 value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_factory_1 value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_factory_1 value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -4 }
                    }
                }
                
                if = {
                    limit = { has_building = building_factory_2 }
                    if = { limit = { num_buildings = { type = building_factory_2 value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_factory_2 value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_factory_2 value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_factory_2 value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_factory_2 value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_factory_2 value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_factory_2 value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_factory_2 value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_factory_2 value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_factory_2 value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_factory_2 value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_factory_2 value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_factory_2 value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_factory_2 value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_factory_2 value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -5 }
                        change_variable = { which = planet_rare_crystals_upkeep value = -1 }
                    }
                }
                
                if = {
                    limit = { has_building = building_factory_3 }
                    if = { limit = { num_buildings = { type = building_factory_3 value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_factory_3 value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_factory_3 value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_factory_3 value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_factory_3 value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_factory_3 value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_factory_3 value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_factory_3 value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_factory_3 value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_factory_3 value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_factory_3 value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_factory_3 value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_factory_3 value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_factory_3 value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_factory_3 value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -6 }
                        change_variable = { which = planet_rare_crystals_upkeep value = -2 }
                    }
                }
                
                if = {
                    limit = { has_building = building_refinery }
                    if = { limit = { num_buildings = { type = building_refinery value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_refinery value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_refinery value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_refinery value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_refinery value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_refinery value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_refinery value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_refinery value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_refinery value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_refinery value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_refinery value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_refinery value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_refinery value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_refinery value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_refinery value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -3 }
                    }
                }
                
                if = {
                    limit = { has_building = building_chemical_plant }
                    if = { limit = { num_buildings = { type = building_chemical_plant value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_chemical_plant value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_chemical_plant value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_chemical_plant value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_chemical_plant value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_chemical_plant value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_chemical_plant value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_chemical_plant value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_chemical_plant value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_chemical_plant value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_chemical_plant value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_chemical_plant value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_chemical_plant value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_chemical_plant value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_chemical_plant value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -3 }
                    }
                }
                
                if = {
                    limit = { has_building = building_crystal_plant }
                    if = { limit = { num_buildings = { type = building_crystal_plant value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_crystal_plant value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_crystal_plant value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_crystal_plant value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_crystal_plant value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_crystal_plant value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_crystal_plant value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_crystal_plant value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_crystal_plant value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_crystal_plant value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_crystal_plant value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_crystal_plant value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_crystal_plant value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_crystal_plant value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_crystal_plant value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -3 }
                    }
                }
                
                if = {
                    limit = { has_building = building_nanite_transmuter }
                    if = { limit = { num_buildings = { type = building_nanite_transmuter value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_nanite_transmuter value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_nanite_transmuter value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_nanite_transmuter value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_nanite_transmuter value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_nanite_transmuter value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_nanite_transmuter value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_nanite_transmuter value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_nanite_transmuter value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_nanite_transmuter value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_nanite_transmuter value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_nanite_transmuter value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_nanite_transmuter value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_nanite_transmuter value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_nanite_transmuter value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -5 }
                        change_variable = { which = planet_exotic_gases_output value = 2 }
                        change_variable = { which = planet_rare_crystals_output value = 2 }
                        change_variable = { which = planet_volatile_motes_output value = 2 }
                        #change_variable = { which = planet_nanites_upkeep value = -1 }
                    }
                }
                
                if = {
                    limit = { has_building = building_ministry_production }
                    if = { limit = { num_buildings = { type = building_ministry_production value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_ministry_production value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_ministry_production value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_ministry_production value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_ministry_production value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_ministry_production value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_ministry_production value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_ministry_production value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_ministry_production value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_ministry_production value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_ministry_production value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_ministry_production value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_ministry_production value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_ministry_production value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_ministry_production value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -5 }
                    }
                }
                
                if = {
                    limit = { has_building = building_production_center }
                    if = { limit = { num_buildings = { type = building_production_center value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_production_center value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_production_center value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_production_center value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_production_center value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_production_center value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_production_center value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_production_center value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_production_center value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_production_center value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_production_center value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_production_center value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_production_center value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_production_center value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_production_center value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -5 }
                    }
                }
                

                #Research buildings
                if = {
                    limit = { has_building = building_research_lab_1 }
                    if = { limit = { num_buildings = { type = building_research_lab_1 value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_research_lab_1 value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_research_lab_1 value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_research_lab_1 value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_research_lab_1 value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_research_lab_1 value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_research_lab_1 value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_research_lab_1 value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_research_lab_1 value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_research_lab_1 value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_research_lab_1 value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_research_lab_1 value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_research_lab_1 value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_research_lab_1 value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_research_lab_1 value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -4 }
                    }
                }
                
                if = {
                    limit = { has_building = building_research_lab_2 }
                    if = { limit = { num_buildings = { type = building_research_lab_2 value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_research_lab_2 value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_research_lab_2 value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_research_lab_2 value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_research_lab_2 value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_research_lab_2 value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_research_lab_2 value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_research_lab_2 value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_research_lab_2 value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_research_lab_2 value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_research_lab_2 value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_research_lab_2 value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_research_lab_2 value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_research_lab_2 value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_research_lab_2 value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -5 }
                        change_variable = { which = planet_exotic_gases_upkeep value = -1 }
                    }
                }
                
                if = {
                    limit = { has_building = building_research_lab_3 }
                    if = { limit = { num_buildings = { type = building_research_lab_3 value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_research_lab_3 value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_research_lab_3 value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_research_lab_3 value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_research_lab_3 value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_research_lab_3 value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_research_lab_3 value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_research_lab_3 value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_research_lab_3 value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_research_lab_3 value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_research_lab_3 value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_research_lab_3 value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_research_lab_3 value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_research_lab_3 value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_research_lab_3 value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -6 }
                        change_variable = { which = planet_exotic_gases_upkeep value = -2 }
                    }
                }
                
                if = {
                    limit = { has_building = building_institute }
                    if = { limit = { num_buildings = { type = building_institute value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_institute value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_institute value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_institute value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_institute value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_institute value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_institute value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_institute value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_institute value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_institute value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_institute value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_institute value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_institute value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_institute value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_institute value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -5 }
                    }
                }
                
                if = {
                    limit = { has_building = building_supercomputer }
                    if = { limit = { num_buildings = { type = building_supercomputer value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_supercomputer value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_supercomputer value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_supercomputer value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_supercomputer value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_supercomputer value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_supercomputer value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_supercomputer value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_supercomputer value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_supercomputer value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_supercomputer value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_supercomputer value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_supercomputer value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_supercomputer value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_supercomputer value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -5 }
                    }
                }
                

                #Trade buildings
                if = {
                    limit = { has_building = building_commercial_zone }
                    if = { limit = { num_buildings = { type = building_commercial_zone value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_commercial_zone value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_commercial_zone value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_commercial_zone value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_commercial_zone value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_commercial_zone value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_commercial_zone value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_commercial_zone value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_commercial_zone value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_commercial_zone value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_commercial_zone value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_commercial_zone value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_commercial_zone value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_commercial_zone value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_commercial_zone value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -2 }
                    }
                }
                
                if = {
                    limit = { has_building = building_commercial_megaplex }
                    if = { limit = { num_buildings = { type = building_commercial_megaplex value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_commercial_megaplex value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_commercial_megaplex value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_commercial_megaplex value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_commercial_megaplex value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_commercial_megaplex value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_commercial_megaplex value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_commercial_megaplex value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_commercial_megaplex value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_commercial_megaplex value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_commercial_megaplex value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_commercial_megaplex value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_commercial_megaplex value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_commercial_megaplex value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_commercial_megaplex value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -2 }
                        change_variable = { which = planet_rare_crystals_upkeep value = -1 }
                    }
                }
                
                if = {
                    limit = { has_building = building_galactic_stock_exchange }
                    if = { limit = { num_buildings = { type = building_galactic_stock_exchange value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_galactic_stock_exchange value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_galactic_stock_exchange value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_galactic_stock_exchange value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_galactic_stock_exchange value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_galactic_stock_exchange value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_galactic_stock_exchange value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_galactic_stock_exchange value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_galactic_stock_exchange value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_galactic_stock_exchange value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_galactic_stock_exchange value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_galactic_stock_exchange value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_galactic_stock_exchange value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_galactic_stock_exchange value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_galactic_stock_exchange value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -5 }
                    }
                }
                

                #Amenity buildings
                if = {
                    limit = { has_building = building_luxury_residence }
                    if = { limit = { num_buildings = { type = building_luxury_residence value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_luxury_residence value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_luxury_residence value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_luxury_residence value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_luxury_residence value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_luxury_residence value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_luxury_residence value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_luxury_residence value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_luxury_residence value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_luxury_residence value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_luxury_residence value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_luxury_residence value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_luxury_residence value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_luxury_residence value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_luxury_residence value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -2 }
                    }
                }
                
                if = {
                    limit = { has_building = building_paradise_dome }
                    if = { limit = { num_buildings = { type = building_paradise_dome value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_paradise_dome value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_paradise_dome value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_paradise_dome value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_paradise_dome value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_paradise_dome value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_paradise_dome value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_paradise_dome value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_paradise_dome value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_paradise_dome value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_paradise_dome value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_paradise_dome value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_paradise_dome value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_paradise_dome value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_paradise_dome value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -2 }
                        change_variable = { which = planet_rare_crystals_upkeep value = -1 }
                    }
                }
                
                if = {
                    limit = { has_building = building_communal_housing }
                    if = { limit = { num_buildings = { type = building_communal_housing value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_communal_housing value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_communal_housing value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_communal_housing value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_communal_housing value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_communal_housing value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_communal_housing value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_communal_housing value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_communal_housing value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_communal_housing value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_communal_housing value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_communal_housing value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_communal_housing value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_communal_housing value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_communal_housing value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -2 }
                    }
                }
                
                if = {
                    limit = { has_building = building_communal_housing_large }
                    if = { limit = { num_buildings = { type = building_communal_housing_large value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_communal_housing_large value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_communal_housing_large value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_communal_housing_large value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_communal_housing_large value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_communal_housing_large value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_communal_housing_large value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_communal_housing_large value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_communal_housing_large value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_communal_housing_large value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_communal_housing_large value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_communal_housing_large value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_communal_housing_large value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_communal_housing_large value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_communal_housing_large value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -2 }
                        change_variable = { which = planet_rare_crystals_upkeep value = -1 }
                    }
                }
                
                if = {
                    limit = { has_building = building_drone_storage }
                    if = { limit = { num_buildings = { type = building_drone_storage value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_drone_storage value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_drone_storage value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_drone_storage value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_drone_storage value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_drone_storage value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_drone_storage value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_drone_storage value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_drone_storage value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_drone_storage value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_drone_storage value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_drone_storage value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_drone_storage value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_drone_storage value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_drone_storage value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -2 }
                    }
                }
                
                if = {
                    limit = { has_building = building_drone_megastorage }
                    if = { limit = { num_buildings = { type = building_drone_megastorage value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_drone_megastorage value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_drone_megastorage value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_drone_megastorage value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_drone_megastorage value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_drone_megastorage value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_drone_megastorage value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_drone_megastorage value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_drone_megastorage value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_drone_megastorage value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_drone_megastorage value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_drone_megastorage value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_drone_megastorage value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_drone_megastorage value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_drone_megastorage value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -2 }
                        change_variable = { which = planet_rare_crystals_upkeep value = -1 }
                    }
                }
                
                if = {
                    limit = { has_building = building_hive_warren }
                    if = { limit = { num_buildings = { type = building_hive_warren value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_hive_warren value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_hive_warren value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_hive_warren value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_hive_warren value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_hive_warren value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_hive_warren value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_hive_warren value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_hive_warren value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_hive_warren value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_hive_warren value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_hive_warren value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_hive_warren value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_hive_warren value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_hive_warren value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -2 }
                    }
                }
                
                if = {
                    limit = { has_building = building_expanded_warren }
                    if = { limit = { num_buildings = { type = building_expanded_warren value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_expanded_warren value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_expanded_warren value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_expanded_warren value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_expanded_warren value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_expanded_warren value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_expanded_warren value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_expanded_warren value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_expanded_warren value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_expanded_warren value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_expanded_warren value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_expanded_warren value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_expanded_warren value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_expanded_warren value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_expanded_warren value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -2 }
                        change_variable = { which = planet_rare_crystals_upkeep value = -1 }
                    }
                }
                
                if = {
                    limit = { has_building = building_holo_theatres }
                    if = { limit = { num_buildings = { type = building_holo_theatres value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_holo_theatres value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_holo_theatres value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_holo_theatres value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_holo_theatres value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_holo_theatres value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_holo_theatres value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_holo_theatres value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_holo_theatres value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_holo_theatres value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_holo_theatres value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_holo_theatres value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_holo_theatres value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_holo_theatres value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_holo_theatres value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -2 }
                    }
                }
                
                if = {
                    limit = { has_building = building_hyper_entertainment_forum }
                    if = { limit = { num_buildings = { type = building_hyper_entertainment_forum value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_hyper_entertainment_forum value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_hyper_entertainment_forum value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_hyper_entertainment_forum value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_hyper_entertainment_forum value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_hyper_entertainment_forum value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_hyper_entertainment_forum value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_hyper_entertainment_forum value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_hyper_entertainment_forum value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_hyper_entertainment_forum value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_hyper_entertainment_forum value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_hyper_entertainment_forum value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_hyper_entertainment_forum value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_hyper_entertainment_forum value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_hyper_entertainment_forum value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -2 }
                        change_variable = { which = planet_exotic_gases_upkeep value = -1 }
                    }
                }
                
                if = {
                    limit = { has_building = building_clinic }
                    if = { limit = { num_buildings = { type = building_clinic value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_clinic value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_clinic value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_clinic value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_clinic value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_clinic value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_clinic value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_clinic value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_clinic value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_clinic value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_clinic value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_clinic value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_clinic value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_clinic value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_clinic value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -2 }
                    }
                }
                
                if = {
                    limit = { has_building = building_hospital }
                    if = { limit = { num_buildings = { type = building_hospital value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_hospital value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_hospital value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_hospital value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_hospital value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_hospital value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_hospital value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_hospital value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_hospital value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_hospital value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_hospital value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_hospital value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_hospital value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_hospital value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_hospital value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -2 }
                        change_variable = { which = planet_exotic_gases_upkeep value = -1 }
                    }
                }
                
                if = {
                    limit = { has_building = building_maintenance_depot }
                    if = { limit = { num_buildings = { type = building_maintenance_depot value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_maintenance_depot value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_maintenance_depot value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_maintenance_depot value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_maintenance_depot value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_maintenance_depot value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_maintenance_depot value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_maintenance_depot value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_maintenance_depot value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_maintenance_depot value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_maintenance_depot value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_maintenance_depot value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_maintenance_depot value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_maintenance_depot value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_maintenance_depot value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -1 }
                    }
                }
                
                if = {
                    limit = { has_building = building_spawning_pool }
                    if = { limit = { num_buildings = { type = building_spawning_pool value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_spawning_pool value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_spawning_pool value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_spawning_pool value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_spawning_pool value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_spawning_pool value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_spawning_pool value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_spawning_pool value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_spawning_pool value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_spawning_pool value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_spawning_pool value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_spawning_pool value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_spawning_pool value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_spawning_pool value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_spawning_pool value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -2 }
                    }
                }
                
                if = {
                    limit = { has_building = building_slave_huts }
                    if = { limit = { num_buildings = { type = building_slave_huts value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_slave_huts value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_slave_huts value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_slave_huts value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_slave_huts value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_slave_huts value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_slave_huts value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_slave_huts value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_slave_huts value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_slave_huts value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_slave_huts value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_slave_huts value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_slave_huts value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_slave_huts value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_slave_huts value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -1 }
                    }
                }
                
                if = {
                    limit = { has_building = building_overseer_homes }
                    if = { limit = { num_buildings = { type = building_overseer_homes value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_overseer_homes value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_overseer_homes value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_overseer_homes value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_overseer_homes value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_overseer_homes value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_overseer_homes value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_overseer_homes value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_overseer_homes value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_overseer_homes value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_overseer_homes value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_overseer_homes value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_overseer_homes value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_overseer_homes value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_overseer_homes value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -4 }
                    }
                }
                

                #Unity buildings
                if = {
                    limit = { has_building = building_autochthon_monument }
                    if = { limit = { num_buildings = { type = building_autochthon_monument value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_autochthon_monument value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_autochthon_monument value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_autochthon_monument value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_autochthon_monument value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_autochthon_monument value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_autochthon_monument value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_autochthon_monument value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_autochthon_monument value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_autochthon_monument value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_autochthon_monument value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_autochthon_monument value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_autochthon_monument value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_autochthon_monument value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_autochthon_monument value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -1 }
                    }
                }
                
                if = {
                    limit = { has_building = building_heritage_site }
                    if = { limit = { num_buildings = { type = building_heritage_site value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_heritage_site value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_heritage_site value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_heritage_site value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_heritage_site value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_heritage_site value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_heritage_site value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_heritage_site value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_heritage_site value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_heritage_site value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_heritage_site value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_heritage_site value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_heritage_site value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_heritage_site value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_heritage_site value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -2 }
                    }
                }
                
                if = {
                    limit = { has_building = building_hypercomms_forum }
                    if = { limit = { num_buildings = { type = building_hypercomms_forum value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_hypercomms_forum value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_hypercomms_forum value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_hypercomms_forum value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_hypercomms_forum value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_hypercomms_forum value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_hypercomms_forum value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_hypercomms_forum value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_hypercomms_forum value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_hypercomms_forum value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_hypercomms_forum value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_hypercomms_forum value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_hypercomms_forum value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_hypercomms_forum value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_hypercomms_forum value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -3 }
                        change_variable = { which = planet_rare_crystals_upkeep value = -1 }
                    }
                }
                
                if = {
                    limit = { has_building = building_autocurating_vault }
                    if = { limit = { num_buildings = { type = building_autocurating_vault value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_autocurating_vault value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_autocurating_vault value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_autocurating_vault value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_autocurating_vault value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_autocurating_vault value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_autocurating_vault value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_autocurating_vault value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_autocurating_vault value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_autocurating_vault value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_autocurating_vault value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_autocurating_vault value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_autocurating_vault value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_autocurating_vault value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_autocurating_vault value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -4 }
                        change_variable = { which = planet_rare_crystals_upkeep value = -2 }
                    }
                }
                
                if = {
                    limit = { has_building = building_temple }
                    if = { limit = { num_buildings = { type = building_temple value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_temple value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_temple value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_temple value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_temple value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_temple value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_temple value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_temple value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_temple value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_temple value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_temple value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_temple value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_temple value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_temple value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_temple value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -1 }
                    }
                }
                
                if = {
                    limit = { has_building = building_holotemple }
                    if = { limit = { num_buildings = { type = building_holotemple value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_holotemple value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_holotemple value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_holotemple value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_holotemple value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_holotemple value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_holotemple value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_holotemple value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_holotemple value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_holotemple value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_holotemple value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_holotemple value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_holotemple value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_holotemple value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_holotemple value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -2 }
                    }
                }
                
                if = {
                    limit = { has_building = building_sacred_nexus }
                    if = { limit = { num_buildings = { type = building_sacred_nexus value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_sacred_nexus value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_sacred_nexus value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_sacred_nexus value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_sacred_nexus value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_sacred_nexus value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_sacred_nexus value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_sacred_nexus value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_sacred_nexus value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_sacred_nexus value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_sacred_nexus value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_sacred_nexus value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_sacred_nexus value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_sacred_nexus value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_sacred_nexus value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -3 }
                        change_variable = { which = planet_rare_crystals_upkeep value = -1 }
                    }
                }
                
                if = {
                    limit = { has_building = building_citadel_of_faith }
                    if = { limit = { num_buildings = { type = building_citadel_of_faith value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_citadel_of_faith value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_citadel_of_faith value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_citadel_of_faith value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_citadel_of_faith value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_citadel_of_faith value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_citadel_of_faith value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_citadel_of_faith value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_citadel_of_faith value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_citadel_of_faith value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_citadel_of_faith value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_citadel_of_faith value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_citadel_of_faith value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_citadel_of_faith value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_citadel_of_faith value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -4 }
                        change_variable = { which = planet_rare_crystals_upkeep value = -2 }
                    }
                }
                
                if = {
                    limit = { has_building = building_hive_node }
                    if = { limit = { num_buildings = { type = building_hive_node value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_hive_node value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_hive_node value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_hive_node value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_hive_node value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_hive_node value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_hive_node value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_hive_node value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_hive_node value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_hive_node value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_hive_node value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_hive_node value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_hive_node value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_hive_node value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_hive_node value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -1 }
                    }
                }
                
                if = {
                    limit = { has_building = building_hive_cluster }
                    if = { limit = { num_buildings = { type = building_hive_cluster value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_hive_cluster value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_hive_cluster value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_hive_cluster value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_hive_cluster value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_hive_cluster value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_hive_cluster value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_hive_cluster value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_hive_cluster value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_hive_cluster value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_hive_cluster value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_hive_cluster value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_hive_cluster value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_hive_cluster value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_hive_cluster value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -2 }
                    }
                }
                
                if = {
                    limit = { has_building = building_hive_confluence }
                    if = { limit = { num_buildings = { type = building_hive_confluence value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_hive_confluence value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_hive_confluence value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_hive_confluence value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_hive_confluence value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_hive_confluence value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_hive_confluence value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_hive_confluence value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_hive_confluence value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_hive_confluence value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_hive_confluence value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_hive_confluence value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_hive_confluence value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_hive_confluence value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_hive_confluence value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -3 }
                        change_variable = { which = planet_rare_crystals_upkeep value = -1 }
                    }
                }
                
                if = {
                    limit = { has_building = building_uplink_node }
                    if = { limit = { num_buildings = { type = building_uplink_node value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_uplink_node value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_uplink_node value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_uplink_node value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_uplink_node value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_uplink_node value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_uplink_node value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_uplink_node value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_uplink_node value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_uplink_node value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_uplink_node value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_uplink_node value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_uplink_node value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_uplink_node value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_uplink_node value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -1 }
                    }
                }
                
                if = {
                    limit = { has_building = building_network_junction }
                    if = { limit = { num_buildings = { type = building_network_junction value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_network_junction value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_network_junction value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_network_junction value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_network_junction value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_network_junction value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_network_junction value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_network_junction value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_network_junction value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_network_junction value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_network_junction value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_network_junction value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_network_junction value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_network_junction value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_network_junction value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -2 }
                    }
                }
                
                if = {
                    limit = { has_building = building_system_conflux }
                    if = { limit = { num_buildings = { type = building_system_conflux value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_system_conflux value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_system_conflux value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_system_conflux value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_system_conflux value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_system_conflux value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_system_conflux value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_system_conflux value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_system_conflux value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_system_conflux value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_system_conflux value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_system_conflux value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_system_conflux value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_system_conflux value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_system_conflux value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -3 }
                        change_variable = { which = planet_rare_crystals_upkeep value = -1 }
                    }
                }
                
                if = {
                    limit = { has_building = building_alpha_hub }
                    if = { limit = { num_buildings = { type = building_alpha_hub value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_alpha_hub value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_alpha_hub value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_alpha_hub value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_alpha_hub value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_alpha_hub value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_alpha_hub value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_alpha_hub value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_alpha_hub value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_alpha_hub value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_alpha_hub value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_alpha_hub value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_alpha_hub value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_alpha_hub value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_alpha_hub value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -4 }
                        change_variable = { which = planet_rare_crystals_upkeep value = -2 }
                    }
                }
                
                if = {
                    limit = { has_building = building_organic_sanctuary }
                    if = { limit = { num_buildings = { type = building_organic_sanctuary value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_organic_sanctuary value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_organic_sanctuary value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_organic_sanctuary value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_organic_sanctuary value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_organic_sanctuary value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_organic_sanctuary value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_organic_sanctuary value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_organic_sanctuary value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_organic_sanctuary value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_organic_sanctuary value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_organic_sanctuary value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_organic_sanctuary value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_organic_sanctuary value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_organic_sanctuary value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -2 }
                    }
                }
                
                if = {
                    limit = { has_building = building_organic_paradise }
                    if = { limit = { num_buildings = { type = building_organic_paradise value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_organic_paradise value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_organic_paradise value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_organic_paradise value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_organic_paradise value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_organic_paradise value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_organic_paradise value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_organic_paradise value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_organic_paradise value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_organic_paradise value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_organic_paradise value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_organic_paradise value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_organic_paradise value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_organic_paradise value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_organic_paradise value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -3 }
                        change_variable = { which = planet_exotic_gases_upkeep value = -1 }
                    }
                }
                
                if = {
                    limit = { has_building = building_corporate_monument }
                    if = { limit = { num_buildings = { type = building_corporate_monument value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_monument value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_monument value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_monument value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_monument value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_monument value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_monument value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_monument value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_monument value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_monument value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_monument value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_monument value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_monument value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_monument value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_monument value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -1 }
                    }
                }
                
                if = {
                    limit = { has_building = building_corporate_site }
                    if = { limit = { num_buildings = { type = building_corporate_site value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_site value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_site value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_site value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_site value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_site value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_site value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_site value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_site value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_site value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_site value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_site value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_site value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_site value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_site value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -2 }
                    }
                }
                
                if = {
                    limit = { has_building = building_corporate_forum }
                    if = { limit = { num_buildings = { type = building_corporate_forum value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_forum value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_forum value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_forum value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_forum value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_forum value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_forum value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_forum value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_forum value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_forum value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_forum value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_forum value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_forum value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_forum value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_forum value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -3 }
                        change_variable = { which = planet_rare_crystals_upkeep value = -1 }
                    }
                }
                
                if = {
                    limit = { has_building = building_corporate_vault }
                    if = { limit = { num_buildings = { type = building_corporate_vault value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_vault value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_vault value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_vault value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_vault value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_vault value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_vault value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_vault value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_vault value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_vault value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_vault value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_vault value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_vault value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_vault value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_corporate_vault value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -5 }
                        change_variable = { which = planet_rare_crystals_upkeep value = -2 }
                    }
                }
                

                #Army buildings
                if = {
                    limit = { has_building = building_military_academy }
                    if = { limit = { num_buildings = { type = building_military_academy value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_military_academy value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_military_academy value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_military_academy value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_military_academy value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_military_academy value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_military_academy value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_military_academy value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_military_academy value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_military_academy value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_military_academy value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_military_academy value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_military_academy value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_military_academy value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_military_academy value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -2 }
                    }
                }
                
                if = {
                    limit = { has_building = building_stronghold }
                    if = { limit = { num_buildings = { type = building_stronghold value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_stronghold value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_stronghold value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_stronghold value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_stronghold value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_stronghold value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_stronghold value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_stronghold value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_stronghold value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_stronghold value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_stronghold value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_stronghold value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_stronghold value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_stronghold value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_stronghold value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -1 }
                    }
                }
                
                if = {
                    limit = { has_building = building_fortress }
                    if = { limit = { num_buildings = { type = building_fortress value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_fortress value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_fortress value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_fortress value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_fortress value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_fortress value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_fortress value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_fortress value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_fortress value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_fortress value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_fortress value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_fortress value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_fortress value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_fortress value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_fortress value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -1 }
                        change_variable = { which = planet_volatile_motes_upkeep value = -1 }
                    }
                }
                
                if = {
                    limit = { has_building = building_planetary_shield_generator }
                    if = { limit = { num_buildings = { type = building_planetary_shield_generator value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_planetary_shield_generator value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_planetary_shield_generator value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_planetary_shield_generator value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_planetary_shield_generator value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_planetary_shield_generator value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_planetary_shield_generator value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_planetary_shield_generator value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_planetary_shield_generator value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_planetary_shield_generator value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_planetary_shield_generator value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_planetary_shield_generator value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_planetary_shield_generator value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_planetary_shield_generator value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_planetary_shield_generator value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -5 }
                    }
                }
                

                #Deposit buildings
                if = {
                    limit = { has_building = building_mote_harvesters }
                    if = { limit = { num_buildings = { type = building_mote_harvesters value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_mote_harvesters value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_mote_harvesters value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_mote_harvesters value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_mote_harvesters value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_mote_harvesters value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_mote_harvesters value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_mote_harvesters value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_mote_harvesters value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_mote_harvesters value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_mote_harvesters value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_mote_harvesters value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_mote_harvesters value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_mote_harvesters value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_mote_harvesters value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -1 }
                    }
                }
                
                if = {
                    limit = { has_building = building_gas_extractors }
                    if = { limit = { num_buildings = { type = building_gas_extractors value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_gas_extractors value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_gas_extractors value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_gas_extractors value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_gas_extractors value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_gas_extractors value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_gas_extractors value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_gas_extractors value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_gas_extractors value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_gas_extractors value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_gas_extractors value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_gas_extractors value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_gas_extractors value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_gas_extractors value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_gas_extractors value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -1 }
                    }
                }
                
                if = {
                    limit = { has_building = building_crystal_mines }
                    if = { limit = { num_buildings = { type = building_crystal_mines value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_crystal_mines value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_crystal_mines value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_crystal_mines value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_crystal_mines value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_crystal_mines value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_crystal_mines value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_crystal_mines value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_crystal_mines value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_crystal_mines value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_crystal_mines value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_crystal_mines value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_crystal_mines value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_crystal_mines value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_crystal_mines value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -1 }
                    }
                }
                
                if = {
                    limit = { has_building = building_betharian_power_plant }
                    if = { limit = { num_buildings = { type = building_betharian_power_plant value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_betharian_power_plant value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_betharian_power_plant value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_betharian_power_plant value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_betharian_power_plant value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_betharian_power_plant value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_betharian_power_plant value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_betharian_power_plant value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_betharian_power_plant value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_betharian_power_plant value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_betharian_power_plant value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_betharian_power_plant value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_betharian_power_plant value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_betharian_power_plant value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_betharian_power_plant value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_output value = 10 }
                    }
                }
                
                if = {
                    limit = { has_building = building_xeno_zoo }
                    if = { limit = { num_buildings = { type = building_xeno_zoo value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_xeno_zoo value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_xeno_zoo value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_xeno_zoo value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_xeno_zoo value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_xeno_zoo value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_xeno_zoo value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_xeno_zoo value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_xeno_zoo value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_xeno_zoo value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_xeno_zoo value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_xeno_zoo value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_xeno_zoo value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_xeno_zoo value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_xeno_zoo value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -1 }
                    }
                }
                

                #Event buildings
                if = {
                    limit = { has_building = building_akx_worm_3 }
                    if = { limit = { num_buildings = { type = building_akx_worm_3 value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_akx_worm_3 value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_akx_worm_3 value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_akx_worm_3 value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_akx_worm_3 value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_akx_worm_3 value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_akx_worm_3 value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_akx_worm_3 value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_akx_worm_3 value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_akx_worm_3 value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_akx_worm_3 value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_akx_worm_3 value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_akx_worm_3 value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_akx_worm_3 value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_akx_worm_3 value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -6 }
                    }
                }
                
                if = {
                    limit = { has_building = building_great_pyramid }
                    if = { limit = { num_buildings = { type = building_great_pyramid value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_great_pyramid value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_great_pyramid value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_great_pyramid value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_great_pyramid value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_great_pyramid value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_great_pyramid value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_great_pyramid value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_great_pyramid value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_great_pyramid value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_great_pyramid value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_great_pyramid value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_great_pyramid value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_great_pyramid value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_great_pyramid value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_food_output value = 2 }
                    }
                }
                
                if = {
                    limit = { has_building = building_artist_patron }
                    if = { limit = { num_buildings = { type = building_artist_patron value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_artist_patron value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_artist_patron value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_artist_patron value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_artist_patron value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_artist_patron value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_artist_patron value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_artist_patron value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_artist_patron value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_artist_patron value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_artist_patron value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_artist_patron value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_artist_patron value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_artist_patron value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_artist_patron value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -2 }
                    }
                }
                
                if = {
                    limit = { has_building = building_waste_reprocessing_center }
                    if = { limit = { num_buildings = { type = building_waste_reprocessing_center value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_waste_reprocessing_center value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_waste_reprocessing_center value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_waste_reprocessing_center value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_waste_reprocessing_center value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_waste_reprocessing_center value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_waste_reprocessing_center value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_waste_reprocessing_center value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_waste_reprocessing_center value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_waste_reprocessing_center value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_waste_reprocessing_center value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_waste_reprocessing_center value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_waste_reprocessing_center value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_waste_reprocessing_center value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_waste_reprocessing_center value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_output value = 10 }
                        change_variable = { which = planet_minerals_output value = 10 }
                    }
                }
                

                #Fallen empire buildings
                if = {
                    limit = { has_building = building_ancient_control_center }
                    if = { limit = { num_buildings = { type = building_ancient_control_center value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_ancient_control_center value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_ancient_control_center value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_ancient_control_center value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_ancient_control_center value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_ancient_control_center value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_ancient_control_center value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_ancient_control_center value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_ancient_control_center value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_ancient_control_center value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_ancient_control_center value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_ancient_control_center value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_ancient_control_center value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_ancient_control_center value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_ancient_control_center value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -10 }
                    }
                }
                
                if = {
                    limit = { has_building = building_ancient_palace }
                    if = { limit = { num_buildings = { type = building_ancient_palace value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_ancient_palace value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_ancient_palace value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_ancient_palace value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_ancient_palace value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_ancient_palace value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_ancient_palace value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_ancient_palace value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_ancient_palace value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_ancient_palace value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_ancient_palace value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_ancient_palace value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_ancient_palace value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_ancient_palace value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_ancient_palace value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -10 }
                    }
                }
                
                if = {
                    limit = { has_building = building_affluence_center }
                    if = { limit = { num_buildings = { type = building_affluence_center value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_affluence_center value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_affluence_center value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_affluence_center value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_affluence_center value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_affluence_center value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_affluence_center value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_affluence_center value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_affluence_center value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_affluence_center value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_affluence_center value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_affluence_center value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_affluence_center value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_affluence_center value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_affluence_center value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -10 }
                        change_variable = { which = planet_minerals_upkeep value = -25 }
                        change_variable = { which = planet_consumer_goods_output value = 50 }
                    }
                }
                
                if = {
                    limit = { has_building = building_nourishment_center }
                    if = { limit = { num_buildings = { type = building_nourishment_center value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_nourishment_center value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_nourishment_center value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_nourishment_center value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_nourishment_center value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_nourishment_center value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_nourishment_center value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_nourishment_center value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_nourishment_center value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_nourishment_center value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_nourishment_center value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_nourishment_center value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_nourishment_center value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_nourishment_center value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_nourishment_center value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -20 }
                        change_variable = { which = planet_food_output value = 100 }
                    }
                }
                
                if = {
                    limit = { has_building = building_dimensional_fabricator }
                    if = { limit = { num_buildings = { type = building_dimensional_fabricator value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_dimensional_fabricator value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_dimensional_fabricator value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_dimensional_fabricator value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_dimensional_fabricator value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_dimensional_fabricator value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_dimensional_fabricator value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_dimensional_fabricator value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_dimensional_fabricator value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_dimensional_fabricator value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_dimensional_fabricator value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_dimensional_fabricator value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_dimensional_fabricator value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_dimensional_fabricator value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_dimensional_fabricator value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -20 }
                        change_variable = { which = planet_minerals_output value = 100 }
                        change_variable = { which = planet_exotic_gases_output value = 2 }
                        change_variable = { which = planet_rare_crystals_output value = 2 }
                        change_variable = { which = planet_volatile_motes_output value = 2 }
                    }
                }
                
                if = {
                    limit = { has_building = building_class_4_singularity }
                    if = { limit = { num_buildings = { type = building_class_4_singularity value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_class_4_singularity value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_class_4_singularity value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_class_4_singularity value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_class_4_singularity value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_class_4_singularity value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_class_4_singularity value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_class_4_singularity value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_class_4_singularity value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_class_4_singularity value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_class_4_singularity value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_class_4_singularity value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_class_4_singularity value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_class_4_singularity value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_class_4_singularity value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_output value = 250 }
                    }
                }
                
                if = {
                    limit = { has_building = building_nano_forge }
                    if = { limit = { num_buildings = { type = building_nano_forge value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_nano_forge value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_nano_forge value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_nano_forge value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_nano_forge value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_nano_forge value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_nano_forge value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_nano_forge value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_nano_forge value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_nano_forge value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_nano_forge value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_nano_forge value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_nano_forge value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_nano_forge value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_nano_forge value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -10 }
                        change_variable = { which = planet_minerals_upkeep value = -50 }
                        change_variable = { which = planet_alloys_output value = 25 }
                    }
                }
                
                if = {
                    limit = { has_building = building_master_archive }
                    if = { limit = { num_buildings = { type = building_master_archive value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_master_archive value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_master_archive value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_master_archive value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_master_archive value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_master_archive value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_master_archive value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_master_archive value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_master_archive value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_master_archive value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_master_archive value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_master_archive value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_master_archive value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_master_archive value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_master_archive value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -20 }
                    }
                }
                
                if = {
                    limit = { has_building = building_empyrean_shrine }
                    if = { limit = { num_buildings = { type = building_empyrean_shrine value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_empyrean_shrine value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_empyrean_shrine value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_empyrean_shrine value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_empyrean_shrine value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_empyrean_shrine value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_empyrean_shrine value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_empyrean_shrine value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_empyrean_shrine value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_empyrean_shrine value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_empyrean_shrine value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_empyrean_shrine value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_empyrean_shrine value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_empyrean_shrine value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_empyrean_shrine value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -10 }
                    }
                }
                
                if = {
                    limit = { has_building = building_ancient_cryo_chamber }
                    if = { limit = { num_buildings = { type = building_ancient_cryo_chamber value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_ancient_cryo_chamber value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_ancient_cryo_chamber value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_ancient_cryo_chamber value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_ancient_cryo_chamber value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_ancient_cryo_chamber value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_ancient_cryo_chamber value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_ancient_cryo_chamber value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_ancient_cryo_chamber value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_ancient_cryo_chamber value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_ancient_cryo_chamber value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_ancient_cryo_chamber value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_ancient_cryo_chamber value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_ancient_cryo_chamber value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_ancient_cryo_chamber value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -20 }
                    }
                }
                
                if = {
                    limit = { has_building = building_fe_xeno_zoo }
                    if = { limit = { num_buildings = { type = building_fe_xeno_zoo value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_fe_xeno_zoo value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_fe_xeno_zoo value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_fe_xeno_zoo value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_fe_xeno_zoo value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_fe_xeno_zoo value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_fe_xeno_zoo value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_fe_xeno_zoo value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_fe_xeno_zoo value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_fe_xeno_zoo value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_fe_xeno_zoo value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_fe_xeno_zoo value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_fe_xeno_zoo value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_fe_xeno_zoo value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_fe_xeno_zoo value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -10 }
                    }
                }
                
                if = {
                    limit = { has_building = building_fe_dome }
                    if = { limit = { num_buildings = { type = building_fe_dome value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_fe_dome value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_fe_dome value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_fe_dome value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_fe_dome value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_fe_dome value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_fe_dome value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_fe_dome value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_fe_dome value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_fe_dome value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_fe_dome value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_fe_dome value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_fe_dome value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_fe_dome value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_fe_dome value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -10 }
                    }
                }
                
                if = {
                    limit = { has_building = building_fe_stronghold }
                    if = { limit = { num_buildings = { type = building_fe_stronghold value = 1 }}
                        set_variable = { which = building_count value = 1 }
                    } else_if = { limit = { num_buildings = { type = building_fe_stronghold value = 2 }}
                        set_variable = { which = building_count value = 2 }
                    } else_if = { limit = { num_buildings = { type = building_fe_stronghold value = 3 }}
                        set_variable = { which = building_count value = 3 }
                    } else_if = { limit = { num_buildings = { type = building_fe_stronghold value = 4 }}
                        set_variable = { which = building_count value = 4 }
                    } else_if = { limit = { num_buildings = { type = building_fe_stronghold value = 5 }}
                        set_variable = { which = building_count value = 5 }
                    } else_if = { limit = { num_buildings = { type = building_fe_stronghold value = 6 }}
                        set_variable = { which = building_count value = 6 }
                    } else_if = { limit = { num_buildings = { type = building_fe_stronghold value = 7 }}
                        set_variable = { which = building_count value = 7 }
                    } else_if = { limit = { num_buildings = { type = building_fe_stronghold value = 8 }}
                        set_variable = { which = building_count value = 8 }
                    } else_if = { limit = { num_buildings = { type = building_fe_stronghold value = 9 }}
                        set_variable = { which = building_count value = 9 }
                    } else_if = { limit = { num_buildings = { type = building_fe_stronghold value = 10 }}
                        set_variable = { which = building_count value = 10 }
                    } else_if = { limit = { num_buildings = { type = building_fe_stronghold value = 11 }}
                        set_variable = { which = building_count value = 11 }
                    } else_if = { limit = { num_buildings = { type = building_fe_stronghold value = 12 }}
                        set_variable = { which = building_count value = 12 }
                    } else_if = { limit = { num_buildings = { type = building_fe_stronghold value = 13 }}
                        set_variable = { which = building_count value = 13 }
                    } else_if = { limit = { num_buildings = { type = building_fe_stronghold value = 14 }}
                        set_variable = { which = building_count value = 14 }
                    } else_if = { limit = { num_buildings = { type = building_fe_stronghold value >= 15 }}
                        set_variable = { which = building_count value = 15 }
                    }
                    while = {
                        count = building_count
                        change_variable = { which = planet_energy_upkeep value = -10 }
                    }
                }

                #Branch office buildings
                

                set_variable = { which = building_count value = 0 }








                #income manipulation
                set_variable = { which = planet_minerals_net value = planet_minerals_output }
                set_variable = { which = planet_alloys_net value = planet_alloys_output }
                set_variable = { which = planet_exotic_gases_net value = planet_exotic_gases_output }
                set_variable = { which = planet_rare_crystals_net value = planet_rare_crystals_output }
                set_variable = { which = planet_volatile_motes_net value = planet_volatile_motes_output }
                set_variable = { which = planet_zro_net value = planet_zro_output }
                set_variable = { which = planet_dark_matter_net value = planet_dark_matter_output }
                set_variable = { which = planet_living_metal_net value = planet_living_metal_output }
                set_variable = { which = planet_food_net value = planet_food_output }
                set_variable = { which = planet_consumer_goods_net value = planet_consumer_goods_output }
                set_variable = { which = planet_energy_net value = planet_energy_output }
                
                change_variable = { which = planet_minerals_net value = planet_minerals_upkeep }
                change_variable = { which = planet_alloys_net value = planet_alloys_upkeep }
                change_variable = { which = planet_exotic_gases_net value = planet_exotic_gases_upkeep }
                change_variable = { which = planet_rare_crystals_net value = planet_rare_crystals_upkeep }
                change_variable = { which = planet_volatile_motes_net value = planet_volatile_motes_upkeep }
                change_variable = { which = planet_zro_net value = planet_zro_upkeep }
                change_variable = { which = planet_dark_matter_net value = planet_dark_matter_upkeep }
                change_variable = { which = planet_living_metal_net value = planet_living_metal_upkeep }
                change_variable = { which = planet_food_net value = planet_food_upkeep }
                change_variable = { which = planet_consumer_goods_net value = planet_consumer_goods_upkeep }
                change_variable = { which = planet_energy_net value = planet_energy_upkeep }
                
                change_variable = { which = planet_minerals_owed value = planet_minerals_net }
                change_variable = { which = planet_alloys_owed value = planet_alloys_net }
                change_variable = { which = planet_exotic_gases_owed value = planet_exotic_gases_net }
                change_variable = { which = planet_rare_crystals_owed value = planet_rare_crystals_net }
                change_variable = { which = planet_volatile_motes_owed value = planet_volatile_motes_net }
                change_variable = { which = planet_zro_owed value = planet_zro_net }
                change_variable = { which = planet_dark_matter_owed value = planet_dark_matter_net }
                change_variable = { which = planet_living_metal_owed value = planet_living_metal_net }
                change_variable = { which = planet_food_owed value = planet_food_net }
                change_variable = { which = planet_consumer_goods_owed value = planet_consumer_goods_net }
                change_variable = { which = planet_energy_owed value = planet_energy_net }

                
                if = {
                    limit = { check_variable = { which = planet_minerals_owed value < 0 }}
                    while = {
                        limit = { check_variable = { which = planet_minerals_owed value < 0 }}
                        count = 1000
                        owner = { add_resource = { minerals = 1 }}
                        change_variable = { which = planet_minerals_owed value = 1 }
                        change_variable = { which = planet_minerals_stockpile value = -1 }
                    }
                } else = {
                    while = {
                        limit = { check_variable = { which = planet_minerals_owed value > 0 }}
                        count = 1000
                        owner = { add_resource = { minerals = -1 }}
                        change_variable = { which = planet_minerals_owed value = -1 }
                        change_variable = { which = planet_minerals_stockpile value = 1 }
                    }
                }

                
                if = {
                    limit = { check_variable = { which = planet_alloys_owed value < 0 }}
                    while = {
                        limit = { check_variable = { which = planet_alloys_owed value < 0 }}
                        count = 1000
                        owner = { add_resource = { alloys = 1 }}
                        change_variable = { which = planet_alloys_owed value = 1 }
                        change_variable = { which = planet_alloys_stockpile value = -1 }
                    }
                } else = {
                    while = {
                        limit = { check_variable = { which = planet_alloys_owed value > 0 }}
                        count = 1000
                        owner = { add_resource = { alloys = -1 }}
                        change_variable = { which = planet_alloys_owed value = -1 }
                        change_variable = { which = planet_alloys_stockpile value = 1 }
                    }
                }

                
                if = {
                    limit = { check_variable = { which = planet_exotic_gases_owed value < 0 }}
                    while = {
                        limit = { check_variable = { which = planet_exotic_gases_owed value < 0 }}
                        count = 1000
                        owner = { add_resource = { exotic_gases = 1 }}
                        change_variable = { which = planet_exotic_gases_owed value = 1 }
                        change_variable = { which = planet_exotic_gases_stockpile value = -1 }
                    }
                } else = {
                    while = {
                        limit = { check_variable = { which = planet_exotic_gases_owed value > 0 }}
                        count = 1000
                        owner = { add_resource = { exotic_gases = -1 }}
                        change_variable = { which = planet_exotic_gases_owed value = -1 }
                        change_variable = { which = planet_exotic_gases_stockpile value = 1 }
                    }
                }

                
                if = {
                    limit = { check_variable = { which = planet_rare_crystals_owed value < 0 }}
                    while = {
                        limit = { check_variable = { which = planet_rare_crystals_owed value < 0 }}
                        count = 1000
                        owner = { add_resource = { rare_crystals = 1 }}
                        change_variable = { which = planet_rare_crystals_owed value = 1 }
                        change_variable = { which = planet_rare_crystals_stockpile value = -1 }
                    }
                } else = {
                    while = {
                        limit = { check_variable = { which = planet_rare_crystals_owed value > 0 }}
                        count = 1000
                        owner = { add_resource = { rare_crystals = -1 }}
                        change_variable = { which = planet_rare_crystals_owed value = -1 }
                        change_variable = { which = planet_rare_crystals_stockpile value = 1 }
                    }
                }

                
                if = {
                    limit = { check_variable = { which = planet_volatile_motes_owed value < 0 }}
                    while = {
                        limit = { check_variable = { which = planet_volatile_motes_owed value < 0 }}
                        count = 1000
                        owner = { add_resource = { volatile_motes = 1 }}
                        change_variable = { which = planet_volatile_motes_owed value = 1 }
                        change_variable = { which = planet_volatile_motes_stockpile value = -1 }
                    }
                } else = {
                    while = {
                        limit = { check_variable = { which = planet_volatile_motes_owed value > 0 }}
                        count = 1000
                        owner = { add_resource = { volatile_motes = -1 }}
                        change_variable = { which = planet_volatile_motes_owed value = -1 }
                        change_variable = { which = planet_volatile_motes_stockpile value = 1 }
                    }
                }

                
                if = {
                    limit = { check_variable = { which = planet_zro_owed value < 0 }}
                    while = {
                        limit = { check_variable = { which = planet_zro_owed value < 0 }}
                        count = 1000
                        owner = { add_resource = { sr_zro = 1 }}
                        change_variable = { which = planet_zro_owed value = 1 }
                        change_variable = { which = planet_zro_stockpile value = -1 }
                    }
                } else = {
                    while = {
                        limit = { check_variable = { which = planet_zro_owed value > 0 }}
                        count = 1000
                        owner = { add_resource = { sr_zro = -1 }}
                        change_variable = { which = planet_zro_owed value = -1 }
                        change_variable = { which = planet_zro_stockpile value = 1 }
                    }
                }

                
                if = {
                    limit = { check_variable = { which = planet_dark_matter_owed value < 0 }}
                    while = {
                        limit = { check_variable = { which = planet_dark_matter_owed value < 0 }}
                        count = 1000
                        owner = { add_resource = { sr_dark_matter = 1 }}
                        change_variable = { which = planet_dark_matter_owed value = 1 }
                        change_variable = { which = planet_dark_matter_stockpile value = -1 }
                    }
                } else = {
                    while = {
                        limit = { check_variable = { which = planet_dark_matter_owed value > 0 }}
                        count = 1000
                        owner = { add_resource = { sr_dark_matter = -1 }}
                        change_variable = { which = planet_dark_matter_owed value = -1 }
                        change_variable = { which = planet_dark_matter_stockpile value = 1 }
                    }
                }

                
                if = {
                    limit = { check_variable = { which = planet_living_metals_owed value < 0 }}
                    while = {
                        limit = { check_variable = { which = planet_living_metals_owed value < 0 }}
                        count = 1000
                        owner = { add_resource = { sr_living_metal = 1 }}
                        change_variable = { which = planet_living_metals_owed value = 1 }
                        change_variable = { which = planet_living_metals_stockpile value = -1 }
                    }
                } else = {
                    while = {
                        limit = { check_variable = { which = planet_living_metals_owed value > 0 }}
                        count = 1000
                        owner = { add_resource = { sr_living_metal = -1 }}
                        change_variable = { which = planet_living_metals_owed value = -1 }
                        change_variable = { which = planet_living_metals_stockpile value = 1 }
                    }
                }

                
                if = {
                    limit = { check_variable = { which = planet_food_owed value < 0 }}
                    while = {
                        limit = { check_variable = { which = planet_food_owed value < 0 }}
                        count = 1000
                        owner = { add_resource = { food = 1 }}
                        change_variable = { which = planet_food_owed value = 1 }
                        change_variable = { which = planet_food_stockpile value = -1 }
                    }
                } else = {
                    while = {
                        limit = { check_variable = { which = planet_food_owed value > 0 }}
                        count = 1000
                        owner = { add_resource = { food = -1 }}
                        change_variable = { which = planet_food_owed value = -1 }
                        change_variable = { which = planet_food_stockpile value = 1 }
                    }
                }

                
                if = {
                    limit = { check_variable = { which = planet_consumer_goods_owed value < 0 }}
                    while = {
                        limit = { check_variable = { which = planet_consumer_goods_owed value < 0 }}
                        count = 1000
                        owner = { add_resource = { consumer_goods = 1 }}
                        change_variable = { which = planet_consumer_goods_owed value = 1 }
                        change_variable = { which = planet_consumer_goods_stockpile value = -1 }
                    }
                } else = {
                    while = {
                        limit = { check_variable = { which = planet_consumer_goods_owed value > 0 }}
                        count = 1000
                        owner = { add_resource = { consumer_goods = -1 }}
                        change_variable = { which = planet_consumer_goods_owed value = -1 }
                        change_variable = { which = planet_consumer_goods_stockpile value = 1 }
                    }
                }

                
                # if = {
                #     limit = { check_variable = { which = planet_energy_owed value < 0 }}
                #     while = {
                #         limit = { check_variable = { which = planet_energy_owed value < 0 }}
                #         count = 1000
                #         owner = { add_resource = { energy = 1 }}
                #         change_variable = { which = planet_energy_owed value = 1 }
                #         change_variable = { which = planet_energy_stockpile value = -1 }
                #     }
                # } else = {
                #     while = {
                #         limit = { check_variable = { which = planet_energy_owed value > 0 }}
                #         count = 1000
                #         owner = { add_resource = { energy = -1 }}
                #         change_variable = { which = planet_energy_owed value = -1 }
                #         change_variable = { which = planet_energy_stockpile value = 1 }
                #     }
                # }

                # if = {
                #     limit = {
                #         has_resource = { type = minerals amount >= 50 }
                #     }  
                #     set_variable = { which = planet_minerals_net value = 50 }
                # }
                # else_if = {
                #     limit = {
                #         has_resource = { type = minerals amount >= 40 }
                #         has_resource = { type = minerals amount < 50 }
                #     }
                #     set_variable = { which = planet_minerals_net value = 40 }
                # }
                # else_if = {
                #     limit = {
                #         has_resource = { type = minerals amount >= 30 }
                #         has_resource = { type = minerals amount < 40 }
                #     }
                #     set_variable = { which = planet_minerals_net value = 30 }
                # }
                # else_if = {
                #     limit = {
                #         has_resource = { type = minerals amount >= 20 }
                #         has_resource = { type = minerals amount < 30 }
                #     }
                #     set_variable = { which = planet_minerals_net value = 20 }
                # }
                # else_if = {
                #     limit = {
                #         has_resource = { type = minerals amount >= 10 }
                #         has_resource = { type = minerals amount < 20 }
                #     }
                #     set_variable = { which = planet_minerals_net value = 10 }
                # }
                # else_if = {
                #     limit = {
                #         has_resource = { type = minerals amount >= 0 }
                #         has_resource = { type = minerals amount < 10 }
                #     }
                #     set_variable = { which = planet_minerals_net value = 0 }
                # }
                # else_if = {
                #     limit = {
                #         has_resource = { type = minerals amount >= -10 }
                #         has_resource = { type = minerals amount < 0 }
                #     }
                #     set_variable = { which = planet_minerals_net value = -10 }
                # }
                # else_if = {
                #     limit = {
                #         has_resource = { type = minerals amount >= -20 }
                #         has_resource = { type = minerals amount < -10 }
                #     }
                #     set_variable = { which = planet_minerals_net value = -20 }
                # }
                # else_if = {
                #     limit = {
                #         has_resource = { type = minerals amount >= -30 }
                #         has_resource = { type = minerals amount < -20 }
                #     }
                #     set_variable = { which = planet_minerals_net value = -30 }
                # }
                # else_if = {
                #     limit = {
                #         has_resource = { type = minerals amount >= -40 }
                #         has_resource = { type = minerals amount < -30 }
                #     }
                #     set_variable = { which = planet_minerals_net value = -40 }
                # }
                # else = {
                #     set_variable = { which = planet_minerals_net value = -50 }
                # }
            }
        }
    }
}